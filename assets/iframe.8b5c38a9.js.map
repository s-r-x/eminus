{"version":3,"file":"iframe.8b5c38a9.js","sources":["../../vite/modulepreload-polyfill","../../.storybook/preview.js","../../src/utils/extract-pointer-coords.ts","../../src/utils/is-in-range.ts","../../src/utils/map-number.ts","../../src/utils/is-nil.ts","../../src/utils/clamp.ts","../../src/components/Marks/Mark.tsx","../../src/components/Marks/index.tsx","../../src/components/Track/index.tsx","../../src/utils/is-empty.ts","../../src/components/Controls/Control/index.tsx","../../src/components/Controls/index.tsx","../../src/components/Tooltip/index.tsx","../../src/utils/is-arrays-eq.ts","../../src/components/Root/index.tsx","../../src/utils/sort-array.ts","../../src/utils/find-nearest-number-idx.ts","../../src/components/Root/Uncontrolled.tsx","../../../../../../../virtual:/@storybook/builder-vite/vite-app.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const parameters = {\n  layout: 'centered',\n  options: {\n    storySort: {\n      order: [\n        'Playground',\n        'Controlled and Uncontrolled',\n        'Styling',\n        'Tooltips',\n        'Aria',\n      ],\n    },\n  },\n};\n","import React from 'react';\n\ntype Event = TouchEvent | MouseEvent | React.MouseEvent | React.TouchEvent;\n\nexport const extractPointerCoords = (e: Event) => {\n  if ('touches' in e) {\n    return {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n  }\n  return {\n    x: e.clientX,\n    y: e.clientY,\n  };\n};\n","import { Range } from '../typings/shared';\n\nexport const isInRange = (value: number, [start, end]: Range): boolean => {\n  return value >= Math.min(start, end) && value <= Math.max(start, end);\n};\n","export const mapNumber = (\n  x: number,\n  a: number,\n  b: number,\n  c: number,\n  d: number\n): number => (x - a) * ((d - c) / (b - a)) + c;\n\nexport const mapNumberToPercent = (x: number, a: number, b: number) => {\n  return mapNumber(x, a, b, 0, 100);\n};\n","export function isNil<T>(value: T): boolean {\n  return typeof value === 'undefined' || value === null;\n}\n","import { isNil } from './is-nil';\n\nexport const clamp = (value: number, min: number, max: number): number => {\n  if (isNil(value)) return min;\n  return Math.min(Math.max(min, value), max);\n};\n","import React, { memo, CSSProperties } from 'react';\nimport type {\n  Mark as TMark,\n  MarkLabelFormatter,\n} from '../../typings/root-props';\nimport { mapNumberToPercent } from '../../utils/map-number';\nimport clsx from 'clsx';\nimport { clamp } from '../../utils/clamp';\n\ntype Props = {\n  vertical?: boolean;\n  mark: TMark;\n  min: number;\n  max: number;\n  isActive: boolean;\n  onMouseDown: (value: number) => void;\n  labelFormatter?: MarkLabelFormatter;\n};\nconst Mark = (props: Props) => {\n  const value = typeof props.mark === 'number' ? props.mark : props.mark.value;\n  const x = mapNumberToPercent(value, props.min, props.max);\n  const sharedStyle: CSSProperties = {\n    [props.vertical ? 'top' : 'left']: clamp(x, 0, 100) + '%',\n  };\n  const onMouseDown = (e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    props.onMouseDown(value);\n  };\n  const label = props.labelFormatter\n    ? props.labelFormatter(props.mark)\n    : typeof props.mark === 'number'\n    ? props.mark\n    : props.mark.label || props.mark.value;\n  return (\n    <div\n      className={clsx('Eminus-mark', props.isActive && 'Eminus-mark--active')}\n      onTouchStart={onMouseDown}\n      onMouseDown={onMouseDown}\n    >\n      <div style={sharedStyle} className=\"Eminus-mark-value\" />\n      <div style={sharedStyle} className=\"Eminus-mark-label\">\n        {label}\n      </div>\n    </div>\n  );\n};\nexport default memo(Mark);\n","import React from 'react';\nimport type { MarkLabelFormatter, RootProps } from '../../typings/root-props';\nimport { Range } from '../../typings/shared';\nimport { isInRange } from '../../utils/is-in-range';\nimport Mark from './Mark';\n\ntype Props = Pick<RootProps, 'marks'> & {\n  range: Range;\n  min: number;\n  max: number;\n  vertical?: boolean;\n  onMouseDown: (value: number) => void;\n  labelFormatter?: MarkLabelFormatter;\n};\nconst Marks = (props: Props) => {\n  return (\n    <div className=\"Eminus-marks\">\n      {props.marks.map((mark, idx) => (\n        <Mark\n          vertical={props.vertical}\n          labelFormatter={props.labelFormatter}\n          onMouseDown={props.onMouseDown}\n          isActive={isInRange(\n            typeof mark === 'number' ? mark : mark.value,\n            props.range\n          )}\n          key={idx}\n          min={props.min}\n          max={props.max}\n          mark={mark}\n        />\n      ))}\n    </div>\n  );\n};\nexport default Marks;\n","import React from 'react';\nimport { RootProps } from '../../typings/root-props';\nimport { Range } from '../../typings/shared';\nimport { mapNumberToPercent } from '../../utils/map-number';\n\ntype Props = Pick<RootProps, 'disabled' | 'hideTrack'> & {\n  range: Range;\n  vertical?: boolean;\n  min: number;\n  max: number;\n};\nconst Track = ({ range, hideTrack, min, max, vertical }: Props) => {\n  if (hideTrack) {\n    return <div className=\"Eminus-track\" />;\n  }\n  const mappedRange = [\n    mapNumberToPercent(range[0], min, max),\n    mapNumberToPercent(range[1], min, max),\n  ];\n  return (\n    <div className=\"Eminus-track\">\n      <div\n        className=\"Eminus-track-progress\"\n        style={{\n          [vertical ? 'top' : 'left']: mappedRange[0] + '%',\n          [vertical ? 'height' : 'width']:\n            mappedRange[1] - mappedRange[0] + '%',\n        }}\n      />\n    </div>\n  );\n};\nexport default Track;\n","export function isEmpty<T>(value?: T[]): boolean {\n  return !(value && value.length > 0);\n}\n","import React, { PureComponent } from 'react';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../../typings/event-fns';\nimport { mapNumberToPercent } from '../../../utils/map-number';\n\nexport type Props = {\n  value: number;\n  idx: number;\n  vertical?: boolean;\n  min: number;\n  max: number;\n  step: number;\n  disabled?: boolean;\n  onBlur: ControlBlurFn;\n  onFocus: ControlFocusFn;\n  onPointerDown: PointerDownFn;\n  onMouseEnter: (idx: number) => void;\n  onMouseLeave: () => void;\n  ariaLabel?: string;\n  ariaLabelledBy?: string;\n  ariaDescribedBy?: string;\n  ariaValueText?: string;\n  isDragging?: boolean;\n  isActive: boolean;\n};\n\nclass Control extends PureComponent<Props> {\n  onBlur: React.FocusEventHandler<HTMLDivElement> = e => {\n    this.props.onBlur(e, this.props.idx);\n  };\n  onFocus: React.FocusEventHandler<HTMLDivElement> = e => {\n    this.props.onFocus(e, this.props.idx);\n  };\n  onMouseEnter = () => {\n    this.props.onMouseEnter(this.props.idx);\n  };\n  onPointerDown = (e: React.TouchEvent | React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onPointerDown(e, this.props.idx);\n  };\n  get value(): number {\n    return this.props.value;\n  }\n  render() {\n    const { props, value } = this;\n    return (\n      <div\n        aria-valuetext={props.ariaValueText}\n        aria-disabled={props.disabled}\n        aria-label={props.ariaLabel}\n        aria-labelledby={props.ariaLabelledBy}\n        aria-describedby={props.ariaDescribedBy}\n        aria-valuemin={props.min}\n        aria-valuemax={props.max}\n        aria-valuenow={value}\n        aria-orientation={props.vertical ? 'vertical' : 'horizontal'}\n        onTouchStart={this.onPointerDown}\n        onMouseDown={this.onPointerDown}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={props.onMouseLeave}\n        style={{\n          [props.vertical ? 'top' : 'left']:\n            mapNumberToPercent(value, props.min, props.max) + '%',\n          pointerEvents:\n            props.disabled || (props.isDragging && !props.isActive)\n              ? 'none'\n              : 'auto',\n          cursor: props.isDragging && props.isActive ? 'inherit' : 'grab',\n        }}\n        data-idx={props.idx}\n        role=\"slider\"\n        tabIndex={props.disabled ? undefined : 0}\n        className=\"Eminus-control\"\n      />\n    );\n  }\n}\nexport default Control;\n","import React from 'react';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../typings/event-fns';\nimport { RootProps } from '../../typings/root-props';\nimport Control from './Control';\n\ntype Props = Pick<\n  RootProps,\n  | 'disabled'\n  | 'ariaLabel'\n  | 'ariaLabelledBy'\n  | 'ariaDescribedBy'\n  | 'ariaValueTextFormatter'\n> & {\n  vertical?: boolean;\n  min: number;\n  max: number;\n  step: number;\n  activeIdx: number;\n  isDragging: boolean;\n  onMouseEnter: (idx: number) => void;\n  onMouseLeave: () => void;\n  onPointerDown: PointerDownFn;\n  onBlur: ControlBlurFn;\n  onFocus: ControlFocusFn;\n  values: number[];\n};\n\nconst Controls = (props: Props) => {\n  return (\n    <div className=\"Eminus-handlers\">\n      {props.values.map((n, idx) => (\n        <Control\n          vertical={props.vertical}\n          ariaLabel={props.ariaLabel[idx]}\n          ariaLabelledBy={props.ariaLabelledBy[idx]}\n          ariaDescribedBy={props.ariaDescribedBy[idx]}\n          ariaValueText={\n            props.ariaValueTextFormatter && props.ariaValueTextFormatter(n, idx)\n          }\n          isDragging={props.isDragging}\n          isActive={props.activeIdx === idx}\n          disabled={props.disabled}\n          step={props.step}\n          min={props.min}\n          max={props.max}\n          idx={idx}\n          value={n}\n          key={idx}\n          onBlur={props.onBlur}\n          onFocus={props.onFocus}\n          onPointerDown={props.onPointerDown}\n          onMouseEnter={props.onMouseEnter}\n          onMouseLeave={props.onMouseLeave}\n        />\n      ))}\n    </div>\n  );\n};\nexport default Controls;\n","import React from 'react';\nimport { isNil } from '../../utils/is-nil';\nimport { RootProps } from '../../typings/root-props';\nimport { mapNumberToPercent } from '../../utils/map-number';\n\ntype Props = Pick<RootProps, 'tooltipFormatter' | 'tooltipRenderer'> & {\n  value: number;\n  vertical?: boolean;\n  min: number;\n  max: number;\n};\nconst Tooltip = (props: Props) => {\n  const content = props.tooltipFormatter\n    ? props.tooltipFormatter(props.value)\n    : props.value;\n  if (isNil(content) || content === '') return null;\n  const style: React.CSSProperties = {\n    [props.vertical ? 'top' : 'left']:\n      mapNumberToPercent(props.value, props.min, props.max) + '%',\n  };\n  if (props.tooltipRenderer) {\n    return props.tooltipRenderer({ style, value: props.value });\n  }\n  return (\n    <div data-value={props.value} style={style} className=\"Eminus-tooltip\">\n      {content}\n    </div>\n  );\n};\n\nexport default Tooltip;\n","type Arr = number[];\nexport const isArraysEq = (arr1: Arr, arr2: Arr): boolean => {\n  if (!arr1 || !arr2) return false;\n  const len1 = arr1.length,\n    len2 = arr2.length;\n  if (len1 !== len2) return false;\n  else if (!len1 && !len2) return true;\n  else if (len1 === 1 && len2 === 1) return arr1[0] === arr2[0];\n  else if (len1 === 2 && len2 === 2) {\n    return arr1[0] === arr2[0] && arr1[1] === arr2[1];\n  }\n  return !arr1.some((v, idx) => v !== arr2[idx]);\n};\n","import React, { Component } from 'react';\nimport { extractPointerCoords } from '../../utils/extract-pointer-coords';\nimport { findNearestNumberIdx } from '../../utils/find-nearest-number-idx';\nimport { RootProps } from '../../typings/root-props';\nimport Marks from '../Marks';\nimport Track from '../Track';\nimport clsx from 'clsx';\nimport { isEmpty } from '../../utils/is-empty';\nimport { Range } from '../../typings/shared';\nimport Controls from '../Controls';\nimport Tooltip from '../Tooltip';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../typings/event-fns';\nimport { sortArray } from '../../utils/sort-array';\nimport { isNil } from '../../utils/is-nil';\nimport { clamp } from '../../utils/clamp';\nimport memoize from 'memoize-one';\nimport { isArraysEq } from '../../utils/is-arrays-eq';\n\ntype State = {\n  isDragging: boolean;\n  activeIdx: number;\n  hoverIdx: number;\n  isFocused: boolean;\n  disableFocusTooltip: boolean;\n};\ntype TMemoizedArgs = [number[], number, number];\ntype Props = RootProps;\n\nclass Eminus extends Component<Props, State> {\n  static defaultProps: Omit<Props, 'value' | 'onChange'> = {\n    min: 0,\n    max: 100,\n    step: 1,\n    disableCross: false,\n    marks: [],\n    ariaLabel: [],\n    ariaLabelledBy: [],\n    ariaDescribedBy: [],\n  };\n  state: State = {\n    disableFocusTooltip: false,\n    isDragging: false,\n    isFocused: false,\n    activeIdx: -1,\n    hoverIdx: -1,\n  };\n  // deal with fast mousemoves\n  mouseMoveState = {\n    activeIdx: -1,\n    values: [] as number[],\n  };\n  rootRef = React.createRef<HTMLDivElement>();\n  // events\n  handleMouseDown(value: number) {\n    const nearest = findNearestNumberIdx(this.value, value);\n    if (nearest === -1) return;\n    this.mouseMoveState.activeIdx = nearest;\n    this.mouseMoveState.values = this.value;\n    this.setState({\n      activeIdx: nearest,\n      isDragging: true,\n    });\n    window.addEventListener('mousemove', this.onMouseMove);\n    window.addEventListener('touchmove', this.onMouseMove);\n    window.addEventListener('mouseup', this.onMouseUp);\n    window.addEventListener('touchend', this.onMouseUp);\n    document.body.classList.add('EminusGlobal--dragging');\n    this.moveControl(value, nearest);\n    this.$focusControl(nearest);\n  }\n  onRootMouseDown = (e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    const point = extractPointerCoords(e);\n    const value = this.extractValueFromClickPoint(\n      this.props.vertical ? point.y : point.x\n    );\n    this.handleMouseDown(value);\n  };\n  onMarkMouseDown = (value: number) => {\n    this.handleMouseDown(value);\n  };\n  onMouseMove = (e: MouseEvent | TouchEvent) => {\n    e.preventDefault();\n    const { activeIdx } = this;\n    if (activeIdx === -1) return;\n    if (this.state.hoverIdx !== -1 && !this.state.disableFocusTooltip) {\n      this.setState({\n        disableFocusTooltip: true,\n      });\n    }\n    const point = extractPointerCoords(e);\n    const newValue = this.extractValueFromClickPoint(\n      this.props.vertical ? point.y : point.x\n    );\n    this.moveControl(newValue, this.mouseMoveState.activeIdx);\n  };\n  onMouseUp = () => {\n    if (this.props.onComplete) {\n      this.props.onComplete(this.value);\n    }\n    this.mouseMoveState.activeIdx = -1;\n    this.mouseMoveState.values = [];\n    this.setState({\n      isDragging: false,\n      activeIdx: this.state.isFocused ? this.state.activeIdx : -1,\n      disableFocusTooltip: true,\n    });\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('touchmove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchend', this.onMouseUp);\n    document.body.classList.remove('EminusGlobal--dragging');\n  };\n  onControlPointerDown: PointerDownFn = (e, idx) => {\n    this.handleMouseDown(this.value[idx]);\n    if (this.props.onPointerDown) {\n      this.props.onPointerDown(e, idx);\n    }\n  };\n  onControlMouseEnter = (idx: number) => {\n    if (this.state.hoverIdx === -1) {\n      this.setState({ hoverIdx: idx });\n    }\n  };\n  onControlMouseLeave = () => {\n    // this.setState({ hoverIdx: -1 });\n    this.setState({ hoverIdx: -1, disableFocusTooltip: true });\n  };\n  onControlFocus: ControlFocusFn = (e, idx) => {\n    if (this.props.onFocus) {\n      this.props.onFocus(e, idx);\n    }\n    if (!this.state.isDragging) {\n      this.setState({\n        disableFocusTooltip: false,\n        hoverIdx: -1,\n      });\n    }\n    this.setState({\n      isFocused: true,\n      activeIdx: idx,\n    });\n    document.addEventListener('keydown', this.onKeyDown);\n  };\n  onControlBlur: ControlBlurFn = (e, idx) => {\n    if (idx !== this.state.activeIdx) return;\n    if (this.props.onBlur) {\n      this.props.onBlur(e, idx);\n    }\n    this.setState({\n      activeIdx: -1,\n    });\n    document.removeEventListener('keydown', this.onKeyDown);\n  };\n  onKeyDown = (e: KeyboardEvent) => {\n    const { key } = e;\n    const idx = this.state.activeIdx;\n    if (idx === -1) {\n      return;\n    }\n    const { min, max, step } = this;\n    const value = this.value[idx];\n    if (key === 'ArrowLeft' || key === 'ArrowUp') {\n      e.preventDefault();\n      this.moveControl(Math.max(value - step, min), idx);\n      this.setState({\n        disableFocusTooltip: false,\n      });\n    } else if (key === 'ArrowRight' || key === 'ArrowDown') {\n      e.preventDefault();\n      this.moveControl(Math.min(value + step, max), idx);\n      this.setState({\n        disableFocusTooltip: false,\n      });\n    }\n  };\n\n  // utils\n  $findControlByIdx(idx: number): HTMLDivElement | null {\n    return this.rootRef.current?.querySelector(`[data-idx=\"${idx}\"]`) ?? null;\n  }\n  $focusControl(idx: number) {\n    const $el = this.$findControlByIdx(idx);\n    if ($el) {\n      $el.focus();\n    }\n  }\n  extractValueFromClickPoint(global: number): number {\n    const { rootRef } = this;\n    if (!rootRef.current) return 0;\n    const { min, max, step } = this;\n    const { vertical } = this.props;\n    const rootRect = rootRef.current.getBoundingClientRect();\n    const size = Math.abs(\n      vertical ? rootRect.top - rootRect.bottom : rootRect.left - rootRect.right\n    );\n    const v = Math.max(global - (vertical ? rootRect.top : rootRect.left), 0);\n    return (\n      Math.round(((max - min) * Math.min(v / size, 1) + min) / step) * step\n    );\n  }\n  generateNewValueAndCommit(value: number, idx: number) {\n    const currentValue = this.value[idx];\n    if (currentValue === value) return;\n    const newValue = this.generateNewValue(value, idx);\n    this.commitNewValue(newValue);\n  }\n  generateNewValue = (value: number, idx: number): number[] => {\n    const { value: currentValue } = this;\n    if (currentValue.length <= 1) {\n      return [value];\n    } else {\n      const newValue = [...currentValue];\n      newValue[idx] = value;\n      return newValue;\n    }\n  };\n  commitNewValue(value: number[]) {\n    const oldValue = this.value;\n    const newValue = this.memoizedValue(value, this.min, this.max);\n    if (!isArraysEq(oldValue, newValue)) {\n      this.mouseMoveState.values = newValue;\n      this.props.onChange(newValue);\n    }\n  }\n  moveControl(nextValue: number, idx: number) {\n    const { value, minDist } = this;\n    const { disableCross } = this.props;\n    const currentValue = value[idx];\n    if (currentValue === nextValue) return;\n    if (value.length <= 1) {\n      return this.generateNewValueAndCommit(nextValue, idx);\n    }\n    const dir = nextValue - currentValue > 0 ? 1 : -1;\n    const { isDeadLock, idxToSwitch: deadLockSwitchIdx } = this.genDeadLockMeta(\n      idx,\n      dir\n    );\n    let bound = { idx: -1, value: 0 };\n    const boundIdx = idx + dir;\n    const potentialBound = {\n      idx: isDeadLock ? (deadLockSwitchIdx as number) : idx + dir,\n      value: value[boundIdx],\n    };\n    if (!isNil(potentialBound.value)) {\n      if (minDist) {\n        if (dir === -1) {\n          potentialBound.value += minDist;\n        } else if (dir === 1) {\n          potentialBound.value -= minDist;\n        }\n      }\n      if (dir === -1 && potentialBound.value >= nextValue) {\n        bound = potentialBound;\n      } else if (dir === 1 && potentialBound.value <= nextValue) {\n        bound = potentialBound;\n      }\n    }\n    if (bound.idx !== -1) {\n      if (disableCross && !isDeadLock) {\n        this.generateNewValueAndCommit(bound.value, idx);\n      } else {\n        const newValue = [...value];\n        newValue[idx] = bound.value;\n        newValue[bound.idx] = nextValue;\n        this.setState({\n          activeIdx: bound.idx,\n        });\n        this.mouseMoveState.activeIdx = bound.idx;\n        this.commitNewValue(newValue);\n        this.$focusControl(bound.idx);\n      }\n    } else {\n      this.generateNewValueAndCommit(nextValue, idx);\n    }\n  }\n  genDeadLockMeta(\n    idx: number,\n    dir: -1 | 1\n  ): {\n    isDeadLock: boolean;\n    idxToSwitch?: number;\n  } {\n    const { disableCross } = this.props;\n    const currentValue = this.value[idx];\n    const isCurrentAtMin = currentValue === this.min;\n    const isCurrentAtMax = currentValue === this.max;\n    const maybeDeadLock =\n      disableCross &&\n      ((dir === 1 && isCurrentAtMin) || (dir === -1 && isCurrentAtMax));\n    if (!maybeDeadLock) {\n      return { isDeadLock: false };\n    }\n    const switchCandidates = this.value\n      .map((value, idx) => ({\n        value,\n        idx,\n      }))\n      .filter(\n        d => d.value === currentValue && (dir === 1 ? d.idx > idx : d.idx < idx)\n      )\n      .map(({ idx }) => idx);\n    if (isEmpty(switchCandidates)) {\n      return { isDeadLock: false };\n    }\n    return {\n      isDeadLock: true,\n      idxToSwitch:\n        dir === 1\n          ? Math.max(...switchCandidates)\n          : Math.min(...switchCandidates),\n    };\n  }\n\n  // getters\n  memoizedValue = memoize(\n    (value: number[], min: number, max: number) =>\n      sortArray(value.map(n => clamp(n, min, max))),\n    // @ts-ignore\n    (oldArgs: TMemoizedArgs, lastArgs: TMemoizedArgs) =>\n      isArraysEq(oldArgs[0], lastArgs[0]) &&\n      oldArgs[1] === lastArgs[1] &&\n      oldArgs[2] === lastArgs[2]\n  );\n  get value(): number[] {\n    if (this.state.isDragging) {\n      return this.mouseMoveState.values;\n    }\n    return this.memoizedValue(this.props.value, this.min, this.max);\n  }\n  get min(): number {\n    return this.props.min as number;\n  }\n  get max(): number {\n    return this.props.max as number;\n  }\n  get step(): number {\n    return this.props.step as number;\n  }\n  get activeIdx(): number {\n    if (this.state.isDragging) {\n      return this.mouseMoveState.activeIdx;\n    }\n    return this.state.activeIdx;\n  }\n  get tooltipIdx(): number {\n    const { state } = this;\n    if (this.props.hideTooltip) return -1;\n    else if (state.hoverIdx !== -1) return state.hoverIdx;\n    else if (state.disableFocusTooltip && !state.isDragging) {\n      return -1;\n    }\n    return this.activeIdx;\n  }\n  get minDist(): number {\n    if (!this.props.disableCross || !this.props.minDist) {\n      return 0;\n    }\n    return this.props.minDist;\n  }\n  render() {\n    const { props, state, tooltipIdx, value, min, max, step } = this;\n    const range: Range = [\n      value.length <= 1 ? 0 : Math.min(...value),\n      Math.max(...value),\n    ];\n    return (\n      <div\n        onTouchStart={this.onRootMouseDown}\n        onMouseDown={this.onRootMouseDown}\n        ref={this.rootRef}\n        style={props.style}\n        className={clsx(\n          'Eminus',\n          props.disabled && 'Eminus--disabled',\n          props.vertical && 'Eminus--vertical',\n          props.className\n        )}\n      >\n        <Track\n          vertical={props.vertical}\n          min={min}\n          max={max}\n          hideTrack={props.hideTrack}\n          range={range}\n        />\n        {!isEmpty(props.marks) && (\n          <Marks\n            vertical={props.vertical}\n            labelFormatter={props.markLabelFormatter}\n            onMouseDown={this.onMarkMouseDown}\n            range={range}\n            min={min}\n            max={max}\n            marks={props.marks}\n          />\n        )}\n        {props.alwaysShowTooltip && (\n          <>\n            {value.map((value, idx) => (\n              <Tooltip\n                key={idx}\n                value={value}\n                tooltipFormatter={props.tooltipFormatter}\n                vertical={props.vertical}\n                tooltipRenderer={props.tooltipRenderer}\n                min={min}\n                max={max}\n              />\n            ))}\n          </>\n        )}\n        {tooltipIdx !== -1 && !props.alwaysShowTooltip && (\n          <Tooltip\n            value={value[tooltipIdx]}\n            tooltipFormatter={props.tooltipFormatter}\n            vertical={props.vertical}\n            tooltipRenderer={props.tooltipRenderer}\n            min={min}\n            max={max}\n          />\n        )}\n        <Controls\n          min={min}\n          max={max}\n          vertical={props.vertical}\n          disabled={props.disabled}\n          step={step}\n          onPointerDown={this.onControlPointerDown}\n          onMouseEnter={this.onControlMouseEnter}\n          onMouseLeave={this.onControlMouseLeave}\n          onFocus={this.onControlFocus}\n          onBlur={this.onControlBlur}\n          isDragging={state.isDragging}\n          activeIdx={this.activeIdx}\n          ariaLabel={props.ariaLabel}\n          ariaLabelledBy={props.ariaLabelledBy}\n          ariaDescribedBy={props.ariaDescribedBy}\n          ariaValueTextFormatter={props.ariaValueTextFormatter}\n          values={value}\n        />\n      </div>\n    );\n  }\n}\nexport default Eminus;\n","export function sortArray(array: number[]): number[] {\n  if (array.length <= 1) return array;\n  else if (array.length === 2) {\n    return array[0] > array[1] ? [array[1], array[0]] : array;\n  }\n  return array.slice().sort((a, b) => a - b);\n}\n","type Acc = {\n  nearest: number;\n  nearestIdx: number;\n};\nexport const findNearestNumberIdx = (\n  array: number[],\n  value: number\n): number => {\n  const { nearestIdx: nearest } = array.reduce(\n    (acc, n, idx) => {\n      const { nearest, nearestIdx } = acc;\n      const dist = Math.abs(value - n);\n      const newAcc: Acc = { nearestIdx: idx, nearest: dist };\n      if (dist > nearest) {\n        return acc;\n      } else if (dist < nearest) {\n        return newAcc;\n      } else {\n        const isIdxMoreSuitableThanCurrent =\n          (value > n && idx > nearestIdx) || (value < n && idx < nearestIdx);\n        if (isIdxMoreSuitableThanCurrent) return newAcc;\n        else return acc;\n      }\n    },\n    { nearestIdx: -1, nearest: Infinity } as Acc\n  );\n  return nearest;\n};\n","import React, { Component } from 'react';\nimport { OnChangeFn } from '../../typings/event-fns';\nimport { UncontrolledRootProps } from '../../typings/root-props';\nimport Eminus from './';\n\ntype Props = UncontrolledRootProps;\ntype State = {\n  value: number[];\n};\nclass EminusUncontrolled extends Component<Props, State> {\n  static defaultProps: Omit<Props, 'defaultValue'> = {\n    min: 0,\n    max: 100,\n    step: 1,\n    disableCross: false,\n    marks: [],\n    ariaLabel: [],\n    ariaLabelledBy: [],\n    ariaDescribedBy: [],\n  };\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      value: props.defaultValue,\n    };\n  }\n  onChange: OnChangeFn = value => {\n    this.setState({ value });\n    if (this.props.onChange) {\n      this.props.onChange(value);\n    }\n  };\n  render() {\n    const { defaultValue: _d, ...props } = this.props;\n    return (\n      <Eminus value={this.state.value} onChange={this.onChange} {...props} />\n    );\n  }\n}\nexport default EminusUncontrolled;\n","import { configure } from '@storybook/react';\n    /* // preview entry\nimport '/home/runner/work/eminus/eminus/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js';\n// preview entry\nimport '/home/runner/work/eminus/eminus/node_modules/@storybook/core-client/dist/esm/globals/globals.js'; */\n\n    import { addDecorator, addParameters, addLoader, addArgTypesEnhancer, addArgsEnhancer } from '@storybook/client-api';\n    import { logger } from '@storybook/client-logger';\n    import * as config_0 from '/@fs//home/runner/work/eminus/eminus/.storybook/preview.js'\nimport * as config_1 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js'\nimport * as config_2 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js'\nimport * as config_3 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js'\nimport * as config_4 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js'\nimport * as config_5 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js'\nimport * as config_6 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js'\nimport * as config_7 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js'\nimport * as config_8 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js'\nimport * as config_9 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js'\n    import * as story_0 from '/@fs//home/runner/work/eminus/eminus/src/stories/Aria.stories.tsx'\nimport * as story_1 from '/@fs//home/runner/work/eminus/eminus/src/stories/ControlledAndUncontrolled.stories.mdx'\nimport * as story_2 from '/@fs//home/runner/work/eminus/eminus/src/stories/Eminus.stories.tsx'\nimport * as story_3 from '/@fs//home/runner/work/eminus/eminus/src/stories/Styling.stories.mdx'\nimport * as story_4 from '/@fs//home/runner/work/eminus/eminus/src/stories/Tooltips.stories.mdx'\n      \n    const configs = [config_0,config_1,config_2,config_3,config_4,config_5,config_6,config_7,config_8,config_9]\n    configs.forEach(config => {\n      Object.keys(config).forEach((key) => {\n        const value = config[key];\n        switch (key) {\n          case 'args':\n          case 'argTypes': {\n            return logger.warn('Invalid args/argTypes in config, ignoring.', JSON.stringify(value));\n          }\n          case 'decorators': {\n            return value.forEach((decorator) => addDecorator(decorator, false));\n          }\n          case 'loaders': {\n            return value.forEach((loader) => addLoader(loader, false));\n          }\n          case 'parameters': {\n            return addParameters({ ...value }, false);\n          }\n          case 'argTypesEnhancers': {\n            return value.forEach((enhancer) => addArgTypesEnhancer(enhancer));\n          }\n          case 'argsEnhancers': {\n            return value.forEach((enhancer) => addArgsEnhancer(enhancer))\n          }\n          case 'globals':\n          case 'globalTypes': {\n            const v = {};\n            v[key] = value;\n            return addParameters(v, false);\n          }\n          default: {\n            // eslint-disable-next-line prefer-template\n            return console.log(key + ' was not supported :( !');\n          }\n        }\n      });\n    })\n    \n    /* TODO: not quite sure what to do with this, to fix HMR\n    if (import.meta.hot) {\n        import.meta.hot.accept();    \n    }\n    */\n    \n    configure(() => [story_0,story_1,story_2,story_3,story_4].filter(el => el.default), { hot: import.meta.hot }, false); // not sure if the import.meta.hot thing is correct"],"names":["relList","document","createElement","supports","link","querySelectorAll","MutationObserver","mutations","mutation","type","node","addedNodes","tagName","rel","observe","childList","subtree","ep","fetchOpts","script","integrity","referrerpolicy","referrerPolicy","crossorigin","credentials","getFetchOpts","href","p","layout","options","storySort","order","extractPointerCoords","e","x","touches","clientX","y","clientY","isInRange","value","start","end","Math","min","max","mapNumberToPercent","a","b","c","d","mapNumber","clamp","isNil","memo","props","mark","sharedStyle","vertical","onMouseDown","preventDefault","stopPropagation","label","labelFormatter","className","clsx","isActive","onTouchStart","style","Marks","marks","map","idx","Mark","range","key","Track","hideTrack","mappedRange","length","PureComponent","constructor","onBlur","this","onFocus","onMouseEnter","onPointerDown","render","ariaValueText","disabled","ariaLabel","ariaLabelledBy","ariaDescribedBy","onMouseLeave","pointerEvents","isDragging","cursor","role","tabIndex","Controls","values","n","Control","ariaValueTextFormatter","activeIdx","step","Tooltip","content","tooltipFormatter","tooltipRenderer","isArraysEq","arr1","arr2","len1","len2","some","v","Component","disableFocusTooltip","isFocused","hoverIdx","React","createRef","point","extractValueFromClickPoint","handleMouseDown","state","setState","newValue","moveControl","mouseMoveState","onComplete","removeEventListener","onMouseMove","onMouseUp","body","classList","remove","addEventListener","onKeyDown","currentValue","memoize","sortArray","array","slice","sort","oldArgs","lastArgs","nearest","nearestIdx","reduce","acc","dist","abs","newAcc","nearest2","Infinity","findNearestNumberIdx","add","$focusControl","$findControlByIdx","rootRef","current","querySelector","$el","focus","global2","rootRect","getBoundingClientRect","size","top","bottom","left","right","round","generateNewValueAndCommit","generateNewValue","commitNewValue","oldValue","memoizedValue","onChange","nextValue","minDist","disableCross","dir","isDeadLock","idxToSwitch","deadLockSwitchIdx","genDeadLockMeta","bound","potentialBound","isCurrentAtMin","isCurrentAtMax","switchCandidates","idx2","filter","isEmpty","hideTooltip","tooltipIdx","onRootMouseDown","ref","markLabelFormatter","onMarkMouseDown","alwaysShowTooltip","value2","onControlPointerDown","onControlMouseEnter","onControlMouseLeave","onControlFocus","onControlBlur","Eminus","defaultProps","defaultValue","_a","_d","__spreadValues","EminusUncontrolled","config_0","config_1","config_2","config_3","config_4","config_5","config_6","config_7","config_8","config_9","forEach","keys","config","logger","warn","JSON","stringify","decorator","addDecorator","loader","addLoader","addParameters","enhancer","addArgTypesEnhancer","addArgsEnhancer","console","log","configure","story_0","story_1","story_2","story_3","story_4","el","default","hot"],"mappings":"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"}