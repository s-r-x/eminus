{"version":3,"file":"iframe.85edb427.js","sources":["../../vite/modulepreload-polyfill","../../.storybook/preview.js","../../src/utils/extract-pointer-coords.ts","../../src/utils/is-in-range.ts","../../src/utils/map-number.ts","../../src/utils/is-nil.ts","../../src/utils/clamp.ts","../../src/components/Marks/Mark.tsx","../../src/components/Marks/index.tsx","../../src/components/Track/index.tsx","../../src/utils/is-empty.ts","../../src/components/Controls/Control/index.tsx","../../src/components/Controls/index.tsx","../../src/components/Tooltip/index.tsx","../../src/utils/is-arrays-eq.ts","../../src/components/Root/index.tsx","../../src/utils/sort-array.ts","../../src/utils/find-nearest-number-idx.ts","../../src/components/Root/Uncontrolled.tsx","../../../../../../../virtual:/@storybook/builder-vite/vite-app.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const parameters = {\n  layout: 'centered',\n  options: {\n    storySort: {\n      order: [\n        'Playground',\n        'Controlled and Uncontrolled',\n        'Styling',\n        'Tooltips',\n        'Aria',\n      ],\n    },\n  },\n};\n","import React from 'react';\n\ntype Event = TouchEvent | MouseEvent | React.MouseEvent | React.TouchEvent;\n\nexport const extractPointerCoords = (e: Event) => {\n  if ('touches' in e) {\n    return {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n  }\n  return {\n    x: e.clientX,\n    y: e.clientY,\n  };\n};\n","import { Range } from '../typings/shared';\n\nexport const isInRange = (value: number, [start, end]: Range): boolean => {\n  return value >= Math.min(start, end) && value <= Math.max(start, end);\n};\n","export const mapNumber = (\n  x: number,\n  a: number,\n  b: number,\n  c: number,\n  d: number\n): number => (x - a) * ((d - c) / (b - a)) + c;\n\nexport const mapNumberToPercent = (x: number, a: number, b: number) => {\n  return mapNumber(x, a, b, 0, 100);\n};\n","export function isNil<T>(value: T): boolean {\n  return typeof value === 'undefined' || value === null;\n}\n","import { isNil } from './is-nil';\n\nexport const clamp = (value: number, min: number, max: number): number => {\n  if (isNil(value)) return min;\n  return Math.min(Math.max(min, value), max);\n};\n","import React, { memo, CSSProperties } from 'react';\nimport type {\n  Mark as TMark,\n  MarkLabelFormatter,\n} from '../../typings/root-props';\nimport { mapNumberToPercent } from '../../utils/map-number';\nimport clsx from 'clsx';\nimport { clamp } from '../../utils/clamp';\n\ntype Props = {\n  vertical?: boolean;\n  mark: TMark;\n  min: number;\n  max: number;\n  isActive: boolean;\n  onMouseDown: (value: number) => void;\n  labelFormatter?: MarkLabelFormatter;\n};\nconst Mark = (props: Props) => {\n  const value = typeof props.mark === 'number' ? props.mark : props.mark.value;\n  const x = mapNumberToPercent(value, props.min, props.max);\n  const sharedStyle: CSSProperties = {\n    [props.vertical ? 'top' : 'left']: clamp(x, 0, 100) + '%',\n  };\n  const onMouseDown = (e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    props.onMouseDown(value);\n  };\n  const label = props.labelFormatter\n    ? props.labelFormatter(props.mark)\n    : typeof props.mark === 'number'\n    ? props.mark\n    : props.mark.label || props.mark.value;\n  return (\n    <div\n      className={clsx('Eminus-mark', props.isActive && 'Eminus-mark--active')}\n      onTouchStart={onMouseDown}\n      onMouseDown={onMouseDown}\n    >\n      <div style={sharedStyle} className=\"Eminus-mark-value\" />\n      <div style={sharedStyle} className=\"Eminus-mark-label\">\n        {label}\n      </div>\n    </div>\n  );\n};\nexport default memo(Mark);\n","import React from 'react';\nimport type { MarkLabelFormatter, RootProps } from '../../typings/root-props';\nimport { Range } from '../../typings/shared';\nimport { isInRange } from '../../utils/is-in-range';\nimport Mark from './Mark';\n\nconst defaultProps: Required<Pick<RootProps, 'marks'>> = {\n  marks: [],\n};\ntype Props = typeof defaultProps & {\n  range: Range;\n  min: number;\n  max: number;\n  vertical?: boolean;\n  onMouseDown: (value: number) => void;\n  labelFormatter?: MarkLabelFormatter;\n};\nconst Marks = (props: Props) => {\n  return (\n    <div className=\"Eminus-marks\">\n      {props.marks.map((mark, idx) => (\n        <Mark\n          vertical={props.vertical}\n          labelFormatter={props.labelFormatter}\n          onMouseDown={props.onMouseDown}\n          isActive={isInRange(\n            typeof mark === 'number' ? mark : mark.value,\n            props.range\n          )}\n          key={idx}\n          min={props.min}\n          max={props.max}\n          mark={mark}\n        />\n      ))}\n    </div>\n  );\n};\nMarks.defaultProps = defaultProps;\nexport default Marks;\n","import React from 'react';\nimport { RootProps } from '../../typings/root-props';\nimport { Range } from '../../typings/shared';\nimport { mapNumberToPercent } from '../../utils/map-number';\n\ntype Props = Pick<RootProps, 'disabled' | 'hideTrack'> & {\n  range: Range;\n  vertical?: boolean;\n  min: number;\n  max: number;\n};\nconst Track = ({ range, hideTrack, min, max, vertical }: Props) => {\n  if (hideTrack) {\n    return <div className=\"Eminus-track\" />;\n  }\n  const mappedRange = [\n    mapNumberToPercent(range[0], min, max),\n    mapNumberToPercent(range[1], min, max),\n  ];\n  return (\n    <div className=\"Eminus-track\">\n      <div\n        className=\"Eminus-track-progress\"\n        style={{\n          [vertical ? 'top' : 'left']: mappedRange[0] + '%',\n          [vertical ? 'height' : 'width']:\n            mappedRange[1] - mappedRange[0] + '%',\n        }}\n      />\n    </div>\n  );\n};\nexport default Track;\n","export function isEmpty<T>(value?: T[]): boolean {\n  return !(value && value.length > 0);\n}\n","import React, { PureComponent } from 'react';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../../typings/event-fns';\nimport { mapNumberToPercent } from '../../../utils/map-number';\n\nexport type Props = {\n  value: number;\n  idx: number;\n  vertical?: boolean;\n  min: number;\n  max: number;\n  step: number;\n  disabled?: boolean;\n  onBlur: ControlBlurFn;\n  onFocus: ControlFocusFn;\n  onPointerDown: PointerDownFn;\n  onMouseEnter: (idx: number) => void;\n  onMouseLeave: () => void;\n  ariaLabel?: string;\n  ariaLabelledBy?: string;\n  ariaDescribedBy?: string;\n  ariaValueText?: string;\n  isDragging?: boolean;\n  isActive: boolean;\n};\n\nclass Control extends PureComponent<Props> {\n  onBlur: React.FocusEventHandler<HTMLDivElement> = e => {\n    this.props.onBlur(e, this.props.idx);\n  };\n  onFocus: React.FocusEventHandler<HTMLDivElement> = e => {\n    this.props.onFocus(e, this.props.idx);\n  };\n  onMouseEnter = () => {\n    this.props.onMouseEnter(this.props.idx);\n  };\n  onPointerDown = (e: React.TouchEvent | React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onPointerDown(e, this.props.idx);\n  };\n  get value(): number {\n    return this.props.value;\n  }\n  render() {\n    const { props, value } = this;\n    return (\n      <div\n        aria-valuetext={props.ariaValueText}\n        aria-disabled={props.disabled}\n        aria-label={props.ariaLabel}\n        aria-labelledby={props.ariaLabelledBy}\n        aria-describedby={props.ariaDescribedBy}\n        aria-valuemin={props.min}\n        aria-valuemax={props.max}\n        aria-valuenow={value}\n        aria-orientation={props.vertical ? 'vertical' : 'horizontal'}\n        onTouchStart={this.onPointerDown}\n        onMouseDown={this.onPointerDown}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={props.onMouseLeave}\n        style={{\n          [props.vertical ? 'top' : 'left']:\n            mapNumberToPercent(value, props.min, props.max) + '%',\n          pointerEvents:\n            props.disabled || (props.isDragging && !props.isActive)\n              ? 'none'\n              : 'auto',\n          cursor: props.isDragging && props.isActive ? 'inherit' : 'grab',\n        }}\n        data-idx={props.idx}\n        role=\"slider\"\n        tabIndex={props.disabled ? undefined : 0}\n        className=\"Eminus-control\"\n      />\n    );\n  }\n}\nexport default Control;\n","import React from 'react';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../typings/event-fns';\nimport { RootProps } from '../../typings/root-props';\nimport Control from './Control';\n\nconst defaultProps: Required<\n  Pick<RootProps, 'ariaLabel' | 'ariaLabelledBy' | 'ariaDescribedBy'>\n> = {\n  ariaLabel: [],\n  ariaLabelledBy: [],\n  ariaDescribedBy: [],\n};\ntype Props = typeof defaultProps &\n  Pick<RootProps, 'disabled' | 'ariaValueTextFormatter' | 'vertical'> & {\n    min: number;\n    max: number;\n    step: number;\n    activeIdx: number;\n    isDragging: boolean;\n    onMouseEnter: (idx: number) => void;\n    onMouseLeave: () => void;\n    onPointerDown: PointerDownFn;\n    onBlur: ControlBlurFn;\n    onFocus: ControlFocusFn;\n    values: number[];\n  };\n\nconst Controls = (props: Props) => {\n  return (\n    <div className=\"Eminus-handlers\">\n      {props.values.map((n, idx) => (\n        <Control\n          vertical={props.vertical}\n          ariaLabel={props.ariaLabel[idx]}\n          ariaLabelledBy={props.ariaLabelledBy[idx]}\n          ariaDescribedBy={props.ariaDescribedBy[idx]}\n          ariaValueText={\n            props.ariaValueTextFormatter && props.ariaValueTextFormatter(n, idx)\n          }\n          isDragging={props.isDragging}\n          isActive={props.activeIdx === idx}\n          disabled={props.disabled}\n          step={props.step}\n          min={props.min}\n          max={props.max}\n          idx={idx}\n          value={n}\n          key={idx}\n          onBlur={props.onBlur}\n          onFocus={props.onFocus}\n          onPointerDown={props.onPointerDown}\n          onMouseEnter={props.onMouseEnter}\n          onMouseLeave={props.onMouseLeave}\n        />\n      ))}\n    </div>\n  );\n};\nControls.defaultProps = defaultProps;\n\nexport default Controls;\n","import React from 'react';\nimport { isNil } from '../../utils/is-nil';\nimport { RootProps } from '../../typings/root-props';\nimport { mapNumberToPercent } from '../../utils/map-number';\n\ntype Props = Pick<RootProps, 'tooltipFormatter' | 'tooltipRenderer'> & {\n  value: number;\n  vertical?: boolean;\n  min: number;\n  max: number;\n};\nconst Tooltip = (props: Props) => {\n  const content = props.tooltipFormatter\n    ? props.tooltipFormatter(props.value)\n    : props.value;\n  if (isNil(content) || content === '') return null;\n  const style: React.CSSProperties = {\n    [props.vertical ? 'top' : 'left']:\n      mapNumberToPercent(props.value, props.min, props.max) + '%',\n  };\n  if (props.tooltipRenderer) {\n    return props.tooltipRenderer({ style, value: props.value });\n  }\n  return (\n    <div data-value={props.value} style={style} className=\"Eminus-tooltip\">\n      {content}\n    </div>\n  );\n};\n\nexport default Tooltip;\n","type Arr = number[];\nexport const isArraysEq = (arr1: Arr, arr2: Arr): boolean => {\n  if (!arr1 || !arr2) return false;\n  const len1 = arr1.length,\n    len2 = arr2.length;\n  if (len1 !== len2) return false;\n  else if (!len1 && !len2) return true;\n  else if (len1 === 1 && len2 === 1) return arr1[0] === arr2[0];\n  else if (len1 === 2 && len2 === 2) {\n    return arr1[0] === arr2[0] && arr1[1] === arr2[1];\n  }\n  return !arr1.some((v, idx) => v !== arr2[idx]);\n};\n","import React, { Component } from 'react';\nimport { extractPointerCoords } from '../../utils/extract-pointer-coords';\nimport { findNearestNumberIdx } from '../../utils/find-nearest-number-idx';\nimport { RootProps } from '../../typings/root-props';\nimport Marks from '../Marks';\nimport Track from '../Track';\nimport clsx from 'clsx';\nimport { isEmpty } from '../../utils/is-empty';\nimport { Range } from '../../typings/shared';\nimport Controls from '../Controls';\nimport Tooltip from '../Tooltip';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../typings/event-fns';\nimport { sortArray } from '../../utils/sort-array';\nimport { isNil } from '../../utils/is-nil';\nimport { clamp } from '../../utils/clamp';\nimport memoize from 'memoize-one';\nimport { isArraysEq } from '../../utils/is-arrays-eq';\n\ntype State = {\n  isDragging: boolean;\n  activeIdx: number;\n  hoverIdx: number;\n  isFocused: boolean;\n  disableFocusTooltip: boolean;\n};\ntype TMemoizedArgs = [number[], number, number];\ntype Props = RootProps;\n\nclass Eminus extends Component<Props, State> {\n  static defaultProps: Omit<Props, 'value' | 'onChange'> = {\n    min: 0,\n    max: 100,\n    step: 1,\n    disableCross: false,\n  };\n  state: State = {\n    disableFocusTooltip: false,\n    isDragging: false,\n    isFocused: false,\n    activeIdx: -1,\n    hoverIdx: -1,\n  };\n  // deal with fast mousemoves\n  mouseMoveState = {\n    activeIdx: -1,\n    values: [] as number[],\n  };\n  rootRef = React.createRef<HTMLDivElement>();\n  // events\n  handleMouseDown(value: number) {\n    const nearest = findNearestNumberIdx(this.value, value);\n    if (nearest === -1) return;\n    this.mouseMoveState.activeIdx = nearest;\n    this.mouseMoveState.values = this.value;\n    this.setState({\n      activeIdx: nearest,\n      isDragging: true,\n    });\n    window.addEventListener('mousemove', this.onMouseMove);\n    window.addEventListener('touchmove', this.onMouseMove);\n    window.addEventListener('mouseup', this.onMouseUp);\n    window.addEventListener('touchend', this.onMouseUp);\n    document.body.classList.add('EminusGlobal--dragging');\n    this.moveControl(value, nearest);\n    this.$focusControl(nearest);\n  }\n  onRootMouseDown = (e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    const point = extractPointerCoords(e);\n    const value = this.extractValueFromClickPoint(\n      this.props.vertical ? point.y : point.x\n    );\n    this.handleMouseDown(value);\n  };\n  onMarkMouseDown = (value: number) => {\n    this.handleMouseDown(value);\n  };\n  onMouseMove = (e: MouseEvent | TouchEvent) => {\n    e.preventDefault();\n    const { activeIdx } = this;\n    if (activeIdx === -1) return;\n    if (this.state.hoverIdx !== -1 && !this.state.disableFocusTooltip) {\n      this.setState({\n        disableFocusTooltip: true,\n      });\n    }\n    const point = extractPointerCoords(e);\n    const newValue = this.extractValueFromClickPoint(\n      this.props.vertical ? point.y : point.x\n    );\n    this.moveControl(newValue, this.mouseMoveState.activeIdx);\n  };\n  onMouseUp = () => {\n    if (this.props.onComplete) {\n      this.props.onComplete(this.value);\n    }\n    this.mouseMoveState.activeIdx = -1;\n    this.mouseMoveState.values = [];\n    this.setState({\n      isDragging: false,\n      activeIdx: this.state.isFocused ? this.state.activeIdx : -1,\n      disableFocusTooltip: true,\n    });\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('touchmove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchend', this.onMouseUp);\n    document.body.classList.remove('EminusGlobal--dragging');\n  };\n  onControlPointerDown: PointerDownFn = (e, idx) => {\n    this.handleMouseDown(this.value[idx]);\n    if (this.props.onPointerDown) {\n      this.props.onPointerDown(e, idx);\n    }\n  };\n  onControlMouseEnter = (idx: number) => {\n    if (this.state.hoverIdx === -1) {\n      this.setState({ hoverIdx: idx });\n    }\n  };\n  onControlMouseLeave = () => {\n    // this.setState({ hoverIdx: -1 });\n    this.setState({ hoverIdx: -1, disableFocusTooltip: true });\n  };\n  onControlFocus: ControlFocusFn = (e, idx) => {\n    if (this.props.onFocus) {\n      this.props.onFocus(e, idx);\n    }\n    if (!this.state.isDragging) {\n      this.setState({\n        disableFocusTooltip: false,\n        hoverIdx: -1,\n      });\n    }\n    this.setState({\n      isFocused: true,\n      activeIdx: idx,\n    });\n    document.addEventListener('keydown', this.onKeyDown);\n  };\n  onControlBlur: ControlBlurFn = (e, idx) => {\n    if (idx !== this.state.activeIdx) return;\n    if (this.props.onBlur) {\n      this.props.onBlur(e, idx);\n    }\n    this.setState({\n      activeIdx: -1,\n    });\n    document.removeEventListener('keydown', this.onKeyDown);\n  };\n  onKeyDown = (e: KeyboardEvent) => {\n    const { key } = e;\n    const idx = this.state.activeIdx;\n    if (idx === -1) {\n      return;\n    }\n    const { min, max, step } = this;\n    const value = this.value[idx];\n    if (key === 'ArrowLeft' || key === 'ArrowUp') {\n      e.preventDefault();\n      this.moveControl(Math.max(value - step, min), idx);\n      this.setState({\n        disableFocusTooltip: false,\n      });\n    } else if (key === 'ArrowRight' || key === 'ArrowDown') {\n      e.preventDefault();\n      this.moveControl(Math.min(value + step, max), idx);\n      this.setState({\n        disableFocusTooltip: false,\n      });\n    }\n  };\n\n  // lifecycle\n  componentWillUnmount() {\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('touchmove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchend', this.onMouseUp);\n    document.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  // utils\n  $findControlByIdx(idx: number): HTMLDivElement | null {\n    return this.rootRef.current?.querySelector(`[data-idx=\"${idx}\"]`) ?? null;\n  }\n  $focusControl(idx: number) {\n    const $el = this.$findControlByIdx(idx);\n    if ($el) {\n      $el.focus();\n    }\n  }\n  extractValueFromClickPoint(global: number): number {\n    const { rootRef } = this;\n    if (!rootRef.current) return 0;\n    const { min, max, step } = this;\n    const { vertical } = this.props;\n    const rootRect = rootRef.current.getBoundingClientRect();\n    const size = Math.abs(\n      vertical ? rootRect.top - rootRect.bottom : rootRect.left - rootRect.right\n    );\n    const v = Math.max(global - (vertical ? rootRect.top : rootRect.left), 0);\n    return (\n      Math.round(((max - min) * Math.min(v / size, 1) + min) / step) * step\n    );\n  }\n  generateNewValueAndCommit(value: number, idx: number) {\n    const currentValue = this.value[idx];\n    if (currentValue === value) return;\n    const newValue = this.generateNewValue(value, idx);\n    this.commitNewValue(newValue);\n  }\n  generateNewValue = (value: number, idx: number): number[] => {\n    const { value: currentValue } = this;\n    if (currentValue.length <= 1) {\n      return [value];\n    } else {\n      const newValue = [...currentValue];\n      newValue[idx] = value;\n      return newValue;\n    }\n  };\n  commitNewValue(value: number[]) {\n    const oldValue = this.value;\n    const newValue = this.memoizedValue(value, this.min, this.max);\n    if (!isArraysEq(oldValue, newValue)) {\n      this.mouseMoveState.values = newValue;\n      this.props.onChange(newValue);\n    }\n  }\n  moveControl(nextValue: number, idx: number) {\n    const { value, minDist } = this;\n    const { disableCross } = this.props;\n    const currentValue = value[idx];\n    if (currentValue === nextValue) return;\n    if (value.length <= 1) {\n      return this.generateNewValueAndCommit(nextValue, idx);\n    }\n    const dir = nextValue - currentValue > 0 ? 1 : -1;\n    const { isDeadLock, idxToSwitch: deadLockSwitchIdx } = this.genDeadLockMeta(\n      idx,\n      dir\n    );\n    let bound = { idx: -1, value: 0 };\n    const boundIdx = idx + dir;\n    const potentialBound = {\n      idx: isDeadLock ? (deadLockSwitchIdx as number) : idx + dir,\n      value: value[boundIdx],\n    };\n    if (!isNil(potentialBound.value)) {\n      if (minDist) {\n        if (dir === -1) {\n          potentialBound.value += minDist;\n        } else if (dir === 1) {\n          potentialBound.value -= minDist;\n        }\n      }\n      if (dir === -1 && potentialBound.value >= nextValue) {\n        bound = potentialBound;\n      } else if (dir === 1 && potentialBound.value <= nextValue) {\n        bound = potentialBound;\n      }\n    }\n    if (bound.idx !== -1) {\n      if (disableCross && !isDeadLock) {\n        this.generateNewValueAndCommit(bound.value, idx);\n      } else {\n        const newValue = [...value];\n        newValue[idx] = bound.value;\n        newValue[bound.idx] = nextValue;\n        this.setState({\n          activeIdx: bound.idx,\n        });\n        this.mouseMoveState.activeIdx = bound.idx;\n        this.commitNewValue(newValue);\n        this.$focusControl(bound.idx);\n      }\n    } else {\n      this.generateNewValueAndCommit(nextValue, idx);\n    }\n  }\n  genDeadLockMeta(\n    idx: number,\n    dir: -1 | 1\n  ): {\n    isDeadLock: boolean;\n    idxToSwitch?: number;\n  } {\n    const { disableCross } = this.props;\n    const currentValue = this.value[idx];\n    const isCurrentAtMin = currentValue === this.min;\n    const isCurrentAtMax = currentValue === this.max;\n    const maybeDeadLock =\n      disableCross &&\n      ((dir === 1 && isCurrentAtMin) || (dir === -1 && isCurrentAtMax));\n    if (!maybeDeadLock) {\n      return { isDeadLock: false };\n    }\n    const switchCandidates = this.value\n      .map((value, idx) => ({\n        value,\n        idx,\n      }))\n      .filter(\n        d => d.value === currentValue && (dir === 1 ? d.idx > idx : d.idx < idx)\n      )\n      .map(({ idx }) => idx);\n    if (isEmpty(switchCandidates)) {\n      return { isDeadLock: false };\n    }\n    return {\n      isDeadLock: true,\n      idxToSwitch:\n        dir === 1\n          ? Math.max(...switchCandidates)\n          : Math.min(...switchCandidates),\n    };\n  }\n\n  // getters\n  memoizedValue = memoize(\n    (value: number[], min: number, max: number) =>\n      sortArray(value.map(n => clamp(n, min, max))),\n    // @ts-ignore\n    (oldArgs: TMemoizedArgs, lastArgs: TMemoizedArgs) =>\n      isArraysEq(oldArgs[0], lastArgs[0]) &&\n      oldArgs[1] === lastArgs[1] &&\n      oldArgs[2] === lastArgs[2]\n  );\n  get value(): number[] {\n    if (this.state.isDragging) {\n      return this.mouseMoveState.values;\n    }\n    return this.memoizedValue(this.props.value, this.min, this.max);\n  }\n  get min(): number {\n    return this.props.min as number;\n  }\n  get max(): number {\n    return this.props.max as number;\n  }\n  get step(): number {\n    return this.props.step as number;\n  }\n  get activeIdx(): number {\n    if (this.state.isDragging) {\n      return this.mouseMoveState.activeIdx;\n    }\n    return this.state.activeIdx;\n  }\n  get tooltipIdx(): number {\n    const { state } = this;\n    if (this.props.hideTooltip) return -1;\n    else if (state.hoverIdx !== -1) return state.hoverIdx;\n    else if (state.disableFocusTooltip && !state.isDragging) {\n      return -1;\n    }\n    return this.activeIdx;\n  }\n  get minDist(): number {\n    if (!this.props.disableCross || !this.props.minDist) {\n      return 0;\n    }\n    return this.props.minDist;\n  }\n  render() {\n    const { props, state, tooltipIdx, value, min, max, step } = this;\n    const range: Range = [\n      value.length <= 1 ? 0 : Math.min(...value),\n      Math.max(...value),\n    ];\n    return (\n      <div\n        onTouchStart={this.onRootMouseDown}\n        onMouseDown={this.onRootMouseDown}\n        ref={this.rootRef}\n        style={props.style}\n        className={clsx(\n          'Eminus',\n          props.disabled && 'Eminus--disabled',\n          props.vertical && 'Eminus--vertical',\n          props.className\n        )}\n      >\n        <Track\n          vertical={props.vertical}\n          min={min}\n          max={max}\n          hideTrack={props.hideTrack}\n          range={range}\n        />\n        {!isEmpty(props.marks) && (\n          <Marks\n            vertical={props.vertical}\n            labelFormatter={props.markLabelFormatter}\n            onMouseDown={this.onMarkMouseDown}\n            range={range}\n            min={min}\n            max={max}\n            marks={props.marks}\n          />\n        )}\n        {props.alwaysShowTooltip && (\n          <>\n            {value.map((value, idx) => (\n              <Tooltip\n                key={idx}\n                value={value}\n                tooltipFormatter={props.tooltipFormatter}\n                vertical={props.vertical}\n                tooltipRenderer={props.tooltipRenderer}\n                min={min}\n                max={max}\n              />\n            ))}\n          </>\n        )}\n        {tooltipIdx !== -1 && !props.alwaysShowTooltip && (\n          <Tooltip\n            value={value[tooltipIdx]}\n            tooltipFormatter={props.tooltipFormatter}\n            vertical={props.vertical}\n            tooltipRenderer={props.tooltipRenderer}\n            min={min}\n            max={max}\n          />\n        )}\n        <Controls\n          min={min}\n          max={max}\n          vertical={props.vertical}\n          disabled={props.disabled}\n          step={step}\n          onPointerDown={this.onControlPointerDown}\n          onMouseEnter={this.onControlMouseEnter}\n          onMouseLeave={this.onControlMouseLeave}\n          onFocus={this.onControlFocus}\n          onBlur={this.onControlBlur}\n          isDragging={state.isDragging}\n          activeIdx={this.activeIdx}\n          ariaLabel={props.ariaLabel}\n          ariaLabelledBy={props.ariaLabelledBy}\n          ariaDescribedBy={props.ariaDescribedBy}\n          ariaValueTextFormatter={props.ariaValueTextFormatter}\n          values={value}\n        />\n      </div>\n    );\n  }\n}\nexport default Eminus;\n","export function sortArray(array: number[]): number[] {\n  if (array.length <= 1) return array;\n  else if (array.length === 2) {\n    return array[0] > array[1] ? [array[1], array[0]] : array;\n  }\n  return array.slice().sort((a, b) => a - b);\n}\n","type Acc = {\n  nearest: number;\n  nearestIdx: number;\n};\nexport const findNearestNumberIdx = (\n  array: number[],\n  value: number\n): number => {\n  const { nearestIdx: nearest } = array.reduce(\n    (acc, n, idx) => {\n      const { nearest, nearestIdx } = acc;\n      const dist = Math.abs(value - n);\n      const newAcc: Acc = { nearestIdx: idx, nearest: dist };\n      if (dist > nearest) {\n        return acc;\n      } else if (dist < nearest) {\n        return newAcc;\n      } else {\n        const isIdxMoreSuitableThanCurrent =\n          (value > n && idx > nearestIdx) || (value < n && idx < nearestIdx);\n        if (isIdxMoreSuitableThanCurrent) return newAcc;\n        else return acc;\n      }\n    },\n    { nearestIdx: -1, nearest: Infinity } as Acc\n  );\n  return nearest;\n};\n","import React, { Component } from 'react';\nimport { OnChangeFn } from '../../typings/event-fns';\nimport { UncontrolledRootProps } from '../../typings/root-props';\nimport Eminus from './';\n\ntype Props = UncontrolledRootProps;\ntype State = {\n  value: number[];\n};\nclass EminusUncontrolled extends Component<Props, State> {\n  static defaultProps: Omit<Props, 'defaultValue'> = {\n    min: 0,\n    max: 100,\n    step: 1,\n    disableCross: false,\n    marks: [],\n    ariaLabel: [],\n    ariaLabelledBy: [],\n    ariaDescribedBy: [],\n  };\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      value: props.defaultValue,\n    };\n  }\n  onChange: OnChangeFn = value => {\n    this.setState({ value });\n    if (this.props.onChange) {\n      this.props.onChange(value);\n    }\n  };\n  render() {\n    const { defaultValue: _d, ...props } = this.props;\n    return (\n      <Eminus value={this.state.value} onChange={this.onChange} {...props} />\n    );\n  }\n}\nexport default EminusUncontrolled;\n","import { configure } from '@storybook/react';\n    /* // preview entry\nimport '/home/runner/work/eminus/eminus/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js';\n// preview entry\nimport '/home/runner/work/eminus/eminus/node_modules/@storybook/core-client/dist/esm/globals/globals.js'; */\n\n    import { addDecorator, addParameters, addLoader, addArgTypesEnhancer, addArgsEnhancer } from '@storybook/client-api';\n    import { logger } from '@storybook/client-logger';\n    import * as config_0 from '/@fs//home/runner/work/eminus/eminus/.storybook/preview.js'\nimport * as config_1 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js'\nimport * as config_2 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js'\nimport * as config_3 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js'\nimport * as config_4 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js'\nimport * as config_5 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js'\nimport * as config_6 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js'\nimport * as config_7 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js'\nimport * as config_8 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js'\nimport * as config_9 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js'\n    import * as story_0 from '/@fs//home/runner/work/eminus/eminus/src/stories/Aria.stories.tsx'\nimport * as story_1 from '/@fs//home/runner/work/eminus/eminus/src/stories/ControlledAndUncontrolled.stories.mdx'\nimport * as story_2 from '/@fs//home/runner/work/eminus/eminus/src/stories/Eminus.stories.tsx'\nimport * as story_3 from '/@fs//home/runner/work/eminus/eminus/src/stories/Styling.stories.mdx'\nimport * as story_4 from '/@fs//home/runner/work/eminus/eminus/src/stories/Tooltips.stories.mdx'\n      \n    const configs = [config_0,config_1,config_2,config_3,config_4,config_5,config_6,config_7,config_8,config_9]\n    configs.forEach(config => {\n      Object.keys(config).forEach((key) => {\n        const value = config[key];\n        switch (key) {\n          case 'args':\n          case 'argTypes': {\n            return logger.warn('Invalid args/argTypes in config, ignoring.', JSON.stringify(value));\n          }\n          case 'decorators': {\n            return value.forEach((decorator) => addDecorator(decorator, false));\n          }\n          case 'loaders': {\n            return value.forEach((loader) => addLoader(loader, false));\n          }\n          case 'parameters': {\n            return addParameters({ ...value }, false);\n          }\n          case 'argTypesEnhancers': {\n            return value.forEach((enhancer) => addArgTypesEnhancer(enhancer));\n          }\n          case 'argsEnhancers': {\n            return value.forEach((enhancer) => addArgsEnhancer(enhancer))\n          }\n          case 'globals':\n          case 'globalTypes': {\n            const v = {};\n            v[key] = value;\n            return addParameters(v, false);\n          }\n          default: {\n            // eslint-disable-next-line prefer-template\n            return console.log(key + ' was not supported :( !');\n          }\n        }\n      });\n    })\n    \n    /* TODO: not quite sure what to do with this, to fix HMR\n    if (import.meta.hot) {\n        import.meta.hot.accept();    \n    }\n    */\n    \n    configure(() => [story_0,story_1,story_2,story_3,story_4].filter(el => el.default), { hot: import.meta.hot }, false); // not sure if the import.meta.hot thing is correct"],"names":["relList","document","createElement","supports","link","querySelectorAll","MutationObserver","mutations","mutation","type","node","addedNodes","tagName","rel","observe","childList","subtree","ep","fetchOpts","script","integrity","referrerpolicy","referrerPolicy","crossorigin","credentials","getFetchOpts","href","p","layout","options","storySort","order","extractPointerCoords","e","x","touches","clientX","y","clientY","isInRange","value","start","end","Math","min","max","mapNumberToPercent","a","b","c","d","mapNumber","clamp","isNil","memo","props","mark","sharedStyle","vertical","onMouseDown","preventDefault","stopPropagation","label","labelFormatter","className","clsx","isActive","onTouchStart","style","Marks","marks","map","idx","Mark","range","key","defaultProps","Track","hideTrack","mappedRange","length","PureComponent","constructor","onBlur","this","onFocus","onMouseEnter","onPointerDown","render","ariaValueText","disabled","ariaLabel","ariaLabelledBy","ariaDescribedBy","onMouseLeave","pointerEvents","isDragging","cursor","role","tabIndex","Controls","values","n","Control","ariaValueTextFormatter","activeIdx","step","Tooltip","content","tooltipFormatter","tooltipRenderer","isArraysEq","arr1","arr2","len1","len2","some","v","Component","disableFocusTooltip","isFocused","hoverIdx","React","createRef","point","extractValueFromClickPoint","handleMouseDown","state","setState","newValue","moveControl","mouseMoveState","onComplete","removeEventListener","onMouseMove","onMouseUp","body","classList","remove","addEventListener","onKeyDown","currentValue","memoize","sortArray","array","slice","sort","oldArgs","lastArgs","nearest","nearestIdx","reduce","acc","dist","abs","newAcc","nearest2","Infinity","findNearestNumberIdx","add","$focusControl","componentWillUnmount","$findControlByIdx","rootRef","current","querySelector","$el","focus","global2","rootRect","getBoundingClientRect","size","top","bottom","left","right","round","generateNewValueAndCommit","generateNewValue","commitNewValue","oldValue","memoizedValue","onChange","nextValue","minDist","disableCross","dir","isDeadLock","idxToSwitch","deadLockSwitchIdx","genDeadLockMeta","bound","potentialBound","isCurrentAtMin","isCurrentAtMax","switchCandidates","idx2","filter","isEmpty","hideTooltip","tooltipIdx","onRootMouseDown","ref","markLabelFormatter","onMarkMouseDown","alwaysShowTooltip","value2","onControlPointerDown","onControlMouseEnter","onControlMouseLeave","onControlFocus","onControlBlur","Eminus","defaultValue","_a","_d","__spreadValues","EminusUncontrolled","config_0","config_1","config_2","config_3","config_4","config_5","config_6","config_7","config_8","config_9","forEach","keys","config","logger","warn","JSON","stringify","decorator","addDecorator","loader","addLoader","addParameters","enhancer","addArgTypesEnhancer","addArgsEnhancer","console","log","configure","story_0","story_1","story_2","story_3","story_4","el","default","hot"],"mappings":"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"}