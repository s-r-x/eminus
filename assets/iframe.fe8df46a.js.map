{"version":3,"file":"iframe.fe8df46a.js","sources":["../../vite/modulepreload-polyfill","../../.storybook/preview.js","../../src/utils/extract-pointer-coords.ts","../../src/utils/is-in-range.ts","../../src/utils/map-number.ts","../../src/utils/is-nil.ts","../../src/utils/clamp.ts","../../src/components/Marks/Mark.tsx","../../src/components/Marks/index.tsx","../../src/components/Track/index.tsx","../../src/utils/is-empty.ts","../../src/components/Controls/Control/index.tsx","../../src/components/Controls/index.tsx","../../src/components/Tooltip/index.tsx","../../src/utils/is-arrays-eq.ts","../../src/components/Root/index.tsx","../../src/utils/sort-array.ts","../../src/utils/find-nearest-number-idx.ts","../../src/components/Root/Uncontrolled.tsx","../../../../../../../virtual:/@storybook/builder-vite/vite-app.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const parameters = {\n  layout: 'centered',\n  options: {\n    storySort: {\n      order: [\n        'Playground',\n        'Controlled and Uncontrolled',\n        'Styling',\n        'Tooltips',\n        'Aria',\n      ],\n    },\n  },\n};\n","import React from 'react';\n\ntype Event = TouchEvent | MouseEvent | React.MouseEvent | React.TouchEvent;\n\nexport const extractPointerCoords = (e: Event) => {\n  if ('touches' in e) {\n    return {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n  }\n  return {\n    x: e.clientX,\n    y: e.clientY,\n  };\n};\n","import { Range } from '../typings/shared';\n\nexport const isInRange = (value: number, [start, end]: Range): boolean => {\n  return value >= Math.min(start, end) && value <= Math.max(start, end);\n};\n","export const mapNumber = (\n  x: number,\n  a: number,\n  b: number,\n  c: number,\n  d: number\n): number => (x - a) * ((d - c) / (b - a)) + c;\n\nexport const mapNumberToPercent = (x: number, a: number, b: number) => {\n  return mapNumber(x, a, b, 0, 100);\n};\n","export function isNil<T>(value: T): boolean {\n  return typeof value === 'undefined' || value === null;\n}\n","import { isNil } from './is-nil';\n\nexport const clamp = (value: number, min: number, max: number): number => {\n  if (isNil(value)) return min;\n  return Math.min(Math.max(min, value), max);\n};\n","import React from 'react';\nimport type {\n  Mark as TMark,\n  MarkLabelFormatter,\n} from '../../typings/root-props';\nimport { mapNumberToPercent } from '../../utils/map-number';\nimport clsx from 'clsx';\nimport { clamp } from '../../utils/clamp';\n\ntype Props = {\n  vertical?: boolean;\n  mark: TMark;\n  min: number;\n  max: number;\n  isActive: boolean;\n  onMouseDown: (value: number) => void;\n  labelFormatter?: MarkLabelFormatter;\n};\n\nclass Mark extends React.PureComponent<Props> {\n  onMouseDown = (e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onMouseDown(this.value);\n  };\n  get label(): React.ReactElement | string | number {\n    return this.props.labelFormatter\n      ? this.props.labelFormatter(this.props.mark)\n      : typeof this.props.mark === 'number'\n      ? this.props.mark\n      : this.props.mark.label || this.props.mark.value;\n  }\n  get value(): number {\n    return typeof this.props.mark === 'number'\n      ? this.props.mark\n      : this.props.mark.value;\n  }\n  get sharedStyle(): React.CSSProperties {\n    const x = mapNumberToPercent(this.value, this.props.min, this.props.max);\n    return {\n      [this.props.vertical ? 'top' : 'left']: clamp(x, 0, 100) + '%',\n    };\n  }\n  render() {\n    const { sharedStyle } = this;\n    return (\n      <div\n        className={clsx(\n          'Eminus-mark',\n          this.props.isActive && 'Eminus-mark--active'\n        )}\n        onTouchStart={this.onMouseDown}\n        onMouseDown={this.onMouseDown}\n      >\n        <div style={sharedStyle} className=\"Eminus-mark-value\" />\n        <div style={sharedStyle} className=\"Eminus-mark-label\">\n          {this.label}\n        </div>\n      </div>\n    );\n  }\n}\nexport default Mark;\n","import React from 'react';\nimport type { MarkLabelFormatter, RootProps } from '../../typings/root-props';\nimport { Range } from '../../typings/shared';\nimport { isInRange } from '../../utils/is-in-range';\nimport Mark from './Mark';\n\nconst defaultProps: Required<Pick<RootProps, 'marks'>> = {\n  marks: [],\n};\ntype Props = typeof defaultProps & {\n  range: Range;\n  min: number;\n  max: number;\n  vertical?: boolean;\n  onMouseDown: (value: number) => void;\n  labelFormatter?: MarkLabelFormatter;\n};\nconst Marks = (props: Props) => {\n  return (\n    <div className=\"Eminus-marks\">\n      {props.marks.map((mark, idx) => (\n        <Mark\n          vertical={props.vertical}\n          labelFormatter={props.labelFormatter}\n          onMouseDown={props.onMouseDown}\n          isActive={isInRange(\n            typeof mark === 'number' ? mark : mark.value,\n            props.range\n          )}\n          key={idx}\n          min={props.min}\n          max={props.max}\n          mark={mark}\n        />\n      ))}\n    </div>\n  );\n};\nMarks.defaultProps = defaultProps;\nexport default Marks;\n","import React from 'react';\nimport { RootProps } from '../../typings/root-props';\nimport { Range } from '../../typings/shared';\nimport { mapNumberToPercent } from '../../utils/map-number';\n\ntype Props = Pick<RootProps, 'disabled' | 'hideTrack'> & {\n  range: Range;\n  vertical?: boolean;\n  min: number;\n  max: number;\n};\n\nclass Track extends React.Component<Props> {\n  get range(): Range {\n    const { range, min, max } = this.props;\n    return [\n      mapNumberToPercent(range[0], min, max),\n      mapNumberToPercent(range[1], min, max),\n    ];\n  }\n  get progressStyle(): React.CSSProperties {\n    const { range } = this;\n    return {\n      [this.props.vertical ? 'top' : 'left']: range[0] + '%',\n      [this.props.vertical ? 'height' : 'width']: range[1] - range[0] + '%',\n    };\n  }\n  render() {\n    if (this.props.hideTrack) {\n      return <div className=\"Eminus-track\" />;\n    }\n    return (\n      <div className=\"Eminus-track\">\n        <div className=\"Eminus-track-progress\" style={this.progressStyle} />\n      </div>\n    );\n  }\n}\n\nexport default Track;\n","export function isEmpty<T>(value?: T[]): boolean {\n  return !(value && value.length > 0);\n}\n","import React from 'react';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../../typings/event-fns';\nimport { mapNumberToPercent } from '../../../utils/map-number';\n\nexport type Props = {\n  value: number;\n  idx: number;\n  vertical?: boolean;\n  min: number;\n  max: number;\n  step: number;\n  disabled?: boolean;\n  onBlur: ControlBlurFn;\n  onFocus: ControlFocusFn;\n  onPointerDown: PointerDownFn;\n  onMouseEnter: (idx: number) => void;\n  onMouseLeave: () => void;\n  ariaLabel?: string;\n  ariaLabelledBy?: string;\n  ariaDescribedBy?: string;\n  ariaValueText?: string;\n  isDragging?: boolean;\n  isActive: boolean;\n};\n\nclass Control extends React.PureComponent<Props> {\n  onBlur: React.FocusEventHandler<HTMLDivElement> = e => {\n    this.props.onBlur(e, this.props.idx);\n  };\n  onFocus: React.FocusEventHandler<HTMLDivElement> = e => {\n    this.props.onFocus(e, this.props.idx);\n  };\n  onMouseEnter = () => {\n    this.props.onMouseEnter(this.props.idx);\n  };\n  onPointerDown = (e: React.TouchEvent | React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onPointerDown(e, this.props.idx);\n  };\n  render() {\n    const { props } = this;\n    return (\n      <div\n        aria-valuetext={props.ariaValueText}\n        aria-disabled={props.disabled}\n        aria-label={props.ariaLabel}\n        aria-labelledby={props.ariaLabelledBy}\n        aria-describedby={props.ariaDescribedBy}\n        aria-valuemin={props.min}\n        aria-valuemax={props.max}\n        aria-valuenow={props.value}\n        aria-orientation={props.vertical ? 'vertical' : 'horizontal'}\n        onTouchStart={this.onPointerDown}\n        onMouseDown={this.onPointerDown}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={props.onMouseLeave}\n        style={{\n          [props.vertical ? 'top' : 'left']:\n            mapNumberToPercent(props.value, props.min, props.max) + '%',\n          pointerEvents:\n            props.disabled || (props.isDragging && !props.isActive)\n              ? 'none'\n              : 'auto',\n          cursor: props.isDragging && props.isActive ? 'inherit' : 'grab',\n        }}\n        data-idx={props.idx}\n        role=\"slider\"\n        tabIndex={props.disabled ? undefined : 0}\n        className=\"Eminus-control\"\n      />\n    );\n  }\n}\nexport default Control;\n","import React from 'react';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../typings/event-fns';\nimport { RootProps } from '../../typings/root-props';\nimport Control from './Control';\n\nconst defaultProps: Required<\n  Pick<RootProps, 'ariaLabel' | 'ariaLabelledBy' | 'ariaDescribedBy'>\n> = {\n  ariaLabel: [],\n  ariaLabelledBy: [],\n  ariaDescribedBy: [],\n};\ntype Props = typeof defaultProps &\n  Pick<RootProps, 'disabled' | 'ariaValueTextFormatter' | 'vertical'> & {\n    min: number;\n    max: number;\n    step: number;\n    activeIdx: number;\n    isDragging: boolean;\n    onMouseEnter: (idx: number) => void;\n    onMouseLeave: () => void;\n    onPointerDown: PointerDownFn;\n    onBlur: ControlBlurFn;\n    onFocus: ControlFocusFn;\n    values: number[];\n  };\n\nconst Controls = (props: Props) => {\n  return (\n    <div className=\"Eminus-handlers\">\n      {props.values.map((n, idx) => (\n        <Control\n          vertical={props.vertical}\n          ariaLabel={props.ariaLabel[idx]}\n          ariaLabelledBy={props.ariaLabelledBy[idx]}\n          ariaDescribedBy={props.ariaDescribedBy[idx]}\n          ariaValueText={\n            props.ariaValueTextFormatter && props.ariaValueTextFormatter(n, idx)\n          }\n          isDragging={props.isDragging}\n          isActive={props.activeIdx === idx}\n          disabled={props.disabled}\n          step={props.step}\n          min={props.min}\n          max={props.max}\n          idx={idx}\n          value={n}\n          key={idx}\n          onBlur={props.onBlur}\n          onFocus={props.onFocus}\n          onPointerDown={props.onPointerDown}\n          onMouseEnter={props.onMouseEnter}\n          onMouseLeave={props.onMouseLeave}\n        />\n      ))}\n    </div>\n  );\n};\nControls.defaultProps = defaultProps;\n\nexport default Controls;\n","import React from 'react';\nimport { isNil } from '../../utils/is-nil';\nimport { RootProps } from '../../typings/root-props';\nimport { mapNumberToPercent } from '../../utils/map-number';\n\ntype Props = Pick<RootProps, 'tooltipFormatter' | 'tooltipRenderer'> & {\n  value: number;\n  vertical?: boolean;\n  min: number;\n  max: number;\n};\nconst Tooltip = (props: Props) => {\n  const content = props.tooltipFormatter\n    ? props.tooltipFormatter(props.value)\n    : props.value;\n  if (isNil(content) || content === '') return null;\n  const style: React.CSSProperties = {\n    [props.vertical ? 'top' : 'left']:\n      mapNumberToPercent(props.value, props.min, props.max) + '%',\n  };\n  if (props.tooltipRenderer) {\n    return props.tooltipRenderer({ style, value: props.value });\n  }\n  return (\n    <div data-value={props.value} style={style} className=\"Eminus-tooltip\">\n      {content}\n    </div>\n  );\n};\n\nexport default Tooltip;\n","type Arr = number[];\nexport const isArraysEq = (arr1: Arr, arr2: Arr): boolean => {\n  if (!arr1 || !arr2) return false;\n  const len1 = arr1.length,\n    len2 = arr2.length;\n  if (len1 !== len2) return false;\n  else if (!len1 && !len2) return true;\n  else if (len1 === 1 && len2 === 1) return arr1[0] === arr2[0];\n  else if (len1 === 2 && len2 === 2) {\n    return arr1[0] === arr2[0] && arr1[1] === arr2[1];\n  }\n  return !arr1.some((v, idx) => v !== arr2[idx]);\n};\n","import React, { Component } from 'react';\nimport { extractPointerCoords } from '../../utils/extract-pointer-coords';\nimport { findNearestNumberIdx } from '../../utils/find-nearest-number-idx';\nimport { RootProps } from '../../typings/root-props';\nimport Marks from '../Marks';\nimport Track from '../Track';\nimport clsx from 'clsx';\nimport { isEmpty } from '../../utils/is-empty';\nimport { Range } from '../../typings/shared';\nimport Controls from '../Controls';\nimport Tooltip from '../Tooltip';\nimport {\n  ControlBlurFn,\n  ControlFocusFn,\n  PointerDownFn,\n} from '../../typings/event-fns';\nimport { sortArray } from '../../utils/sort-array';\nimport { isNil } from '../../utils/is-nil';\nimport { clamp } from '../../utils/clamp';\nimport memoize from 'memoize-one';\nimport { isArraysEq } from '../../utils/is-arrays-eq';\n\ntype State = {\n  isDragging: boolean;\n  activeIdx: number;\n  hoverIdx: number;\n  isFocused: boolean;\n  disableFocusTooltip: boolean;\n};\ntype TMemoizedArgs = [number[], number, number];\ntype Props = RootProps;\n\nclass Eminus extends Component<Props, State> {\n  static defaultProps: Omit<Props, 'value' | 'onChange'> = {\n    min: 0,\n    max: 100,\n    step: 1,\n    disableCross: false,\n  };\n  state: State = {\n    disableFocusTooltip: false,\n    isDragging: false,\n    isFocused: false,\n    activeIdx: -1,\n    hoverIdx: -1,\n  };\n  // deal with fast mousemoves\n  mouseMoveState = {\n    activeIdx: -1,\n    values: [] as number[],\n  };\n  rootRef = React.createRef<HTMLDivElement>();\n  // events\n  handleMouseDown(value: number) {\n    const nearest = findNearestNumberIdx(this.value, value);\n    if (nearest === -1) return;\n    this.mouseMoveState.activeIdx = nearest;\n    this.mouseMoveState.values = this.value;\n    this.setState({\n      activeIdx: nearest,\n      isDragging: true,\n    });\n    window.addEventListener('mousemove', this.onMouseMove);\n    window.addEventListener('touchmove', this.onMouseMove);\n    window.addEventListener('mouseup', this.onMouseUp);\n    window.addEventListener('touchend', this.onMouseUp);\n    document.body.classList.add('EminusGlobal--dragging');\n    this.moveControl(value, nearest);\n    this.$focusControl(nearest);\n  }\n  onRootMouseDown = (e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    const point = extractPointerCoords(e);\n    const value = this.extractValueFromClickPoint(\n      this.props.vertical ? point.y : point.x\n    );\n    this.handleMouseDown(value);\n  };\n  onMarkMouseDown = (value: number) => {\n    this.handleMouseDown(value);\n  };\n  onMouseMove = (e: MouseEvent | TouchEvent) => {\n    e.preventDefault();\n    const { activeIdx } = this;\n    if (activeIdx === -1) return;\n    if (this.state.hoverIdx !== -1 && !this.state.disableFocusTooltip) {\n      this.setState({\n        disableFocusTooltip: true,\n      });\n    }\n    const point = extractPointerCoords(e);\n    const newValue = this.extractValueFromClickPoint(\n      this.props.vertical ? point.y : point.x\n    );\n    this.moveControl(newValue, this.mouseMoveState.activeIdx);\n  };\n  onMouseUp = () => {\n    if (this.props.onComplete) {\n      this.props.onComplete(this.value);\n    }\n    this.mouseMoveState.activeIdx = -1;\n    this.mouseMoveState.values = [];\n    this.setState({\n      isDragging: false,\n      activeIdx: this.state.isFocused ? this.state.activeIdx : -1,\n      disableFocusTooltip: true,\n    });\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('touchmove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchend', this.onMouseUp);\n    document.body.classList.remove('EminusGlobal--dragging');\n  };\n  onControlPointerDown: PointerDownFn = (e, idx) => {\n    this.handleMouseDown(this.value[idx]);\n    if (this.props.onPointerDown) {\n      this.props.onPointerDown(e, idx);\n    }\n  };\n  onControlMouseEnter = (idx: number) => {\n    if (this.state.hoverIdx === -1) {\n      this.setState({ hoverIdx: idx });\n    }\n  };\n  onControlMouseLeave = () => {\n    // this.setState({ hoverIdx: -1 });\n    this.setState({ hoverIdx: -1, disableFocusTooltip: true });\n  };\n  onControlFocus: ControlFocusFn = (e, idx) => {\n    if (this.props.onFocus) {\n      this.props.onFocus(e, idx);\n    }\n    if (!this.state.isDragging) {\n      this.setState({\n        disableFocusTooltip: false,\n        hoverIdx: -1,\n      });\n    }\n    this.setState({\n      isFocused: true,\n      activeIdx: idx,\n    });\n    document.addEventListener('keydown', this.onKeyDown);\n  };\n  onControlBlur: ControlBlurFn = (e, idx) => {\n    if (idx !== this.state.activeIdx) return;\n    if (this.props.onBlur) {\n      this.props.onBlur(e, idx);\n    }\n    this.setState({\n      activeIdx: -1,\n    });\n    document.removeEventListener('keydown', this.onKeyDown);\n  };\n  onKeyDown = (e: KeyboardEvent) => {\n    const { key } = e;\n    const idx = this.state.activeIdx;\n    if (idx === -1) {\n      return;\n    }\n    const { min, max, step } = this;\n    const value = this.value[idx];\n    if (key === 'ArrowLeft' || key === 'ArrowUp') {\n      e.preventDefault();\n      this.moveControl(Math.max(value - step, min), idx);\n      this.setState({\n        disableFocusTooltip: false,\n      });\n    } else if (key === 'ArrowRight' || key === 'ArrowDown') {\n      e.preventDefault();\n      this.moveControl(Math.min(value + step, max), idx);\n      this.setState({\n        disableFocusTooltip: false,\n      });\n    }\n  };\n\n  // lifecycle\n  componentWillUnmount() {\n    window.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('touchmove', this.onMouseMove);\n    window.removeEventListener('mouseup', this.onMouseUp);\n    window.removeEventListener('touchend', this.onMouseUp);\n    document.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  // utils\n  $findControlByIdx(idx: number): HTMLDivElement | null {\n    return this.rootRef.current?.querySelector(`[data-idx=\"${idx}\"]`) ?? null;\n  }\n  $focusControl(idx: number) {\n    const $el = this.$findControlByIdx(idx);\n    if ($el) {\n      $el.focus();\n    }\n  }\n  extractValueFromClickPoint(global: number): number {\n    const { rootRef } = this;\n    if (!rootRef.current) return 0;\n    const { min, max, step } = this;\n    const { vertical } = this.props;\n    const rootRect = rootRef.current.getBoundingClientRect();\n    const size = Math.abs(\n      vertical ? rootRect.top - rootRect.bottom : rootRect.left - rootRect.right\n    );\n    const v = Math.max(global - (vertical ? rootRect.top : rootRect.left), 0);\n    return (\n      Math.round(((max - min) * Math.min(v / size, 1) + min) / step) * step\n    );\n  }\n  generateNewValueAndCommit(value: number, idx: number) {\n    const currentValue = this.value[idx];\n    if (currentValue === value) return;\n    const newValue = this.generateNewValue(value, idx);\n    this.commitNewValue(newValue);\n  }\n  generateNewValue = (value: number, idx: number): number[] => {\n    const { value: currentValue } = this;\n    if (currentValue.length <= 1) {\n      return [value];\n    } else {\n      const newValue = [...currentValue];\n      newValue[idx] = value;\n      return newValue;\n    }\n  };\n  commitNewValue(value: number[]) {\n    const oldValue = this.value;\n    const newValue = this.memoizedValue(value, this.min, this.max);\n    if (!isArraysEq(oldValue, newValue)) {\n      this.mouseMoveState.values = newValue;\n      this.props.onChange(newValue);\n    }\n  }\n  moveControl(nextValue: number, idx: number) {\n    const { value, minDist } = this;\n    const { disableCross } = this.props;\n    const currentValue = value[idx];\n    if (currentValue === nextValue) return;\n    if (value.length <= 1) {\n      return this.generateNewValueAndCommit(nextValue, idx);\n    }\n    const dir = nextValue - currentValue > 0 ? 1 : -1;\n    const { isDeadLock, idxToSwitch: deadLockSwitchIdx } = this.genDeadLockMeta(\n      idx,\n      dir\n    );\n    let bound = { idx: -1, value: 0 };\n    const boundIdx = idx + dir;\n    const potentialBound = {\n      idx: isDeadLock ? (deadLockSwitchIdx as number) : idx + dir,\n      value: value[boundIdx],\n    };\n    if (!isNil(potentialBound.value)) {\n      if (minDist) {\n        if (dir === -1) {\n          potentialBound.value += minDist;\n        } else if (dir === 1) {\n          potentialBound.value -= minDist;\n        }\n      }\n      if (dir === -1 && potentialBound.value >= nextValue) {\n        bound = potentialBound;\n      } else if (dir === 1 && potentialBound.value <= nextValue) {\n        bound = potentialBound;\n      }\n    }\n    if (bound.idx !== -1) {\n      if (disableCross && !isDeadLock) {\n        this.generateNewValueAndCommit(bound.value, idx);\n      } else {\n        const newValue = [...value];\n        newValue[idx] = bound.value;\n        newValue[bound.idx] = nextValue;\n        this.setState({\n          activeIdx: bound.idx,\n        });\n        this.mouseMoveState.activeIdx = bound.idx;\n        this.commitNewValue(newValue);\n        this.$focusControl(bound.idx);\n      }\n    } else {\n      this.generateNewValueAndCommit(nextValue, idx);\n    }\n  }\n  genDeadLockMeta(\n    idx: number,\n    dir: -1 | 1\n  ): {\n    isDeadLock: boolean;\n    idxToSwitch?: number;\n  } {\n    const { disableCross } = this.props;\n    const currentValue = this.value[idx];\n    const isCurrentAtMin = currentValue === this.min;\n    const isCurrentAtMax = currentValue === this.max;\n    const maybeDeadLock =\n      disableCross &&\n      ((dir === 1 && isCurrentAtMin) || (dir === -1 && isCurrentAtMax));\n    if (!maybeDeadLock) {\n      return { isDeadLock: false };\n    }\n    const switchCandidates = this.value\n      .map((value, idx) => ({\n        value,\n        idx,\n      }))\n      .filter(\n        d => d.value === currentValue && (dir === 1 ? d.idx > idx : d.idx < idx)\n      )\n      .map(({ idx }) => idx);\n    if (isEmpty(switchCandidates)) {\n      return { isDeadLock: false };\n    }\n    return {\n      isDeadLock: true,\n      idxToSwitch:\n        dir === 1\n          ? Math.max(...switchCandidates)\n          : Math.min(...switchCandidates),\n    };\n  }\n\n  // getters\n  memoizedValue = memoize(\n    (value: number[], min: number, max: number) =>\n      sortArray(value.map(n => clamp(n, min, max))),\n    // @ts-ignore\n    (oldArgs: TMemoizedArgs, lastArgs: TMemoizedArgs) =>\n      isArraysEq(oldArgs[0], lastArgs[0]) &&\n      oldArgs[1] === lastArgs[1] &&\n      oldArgs[2] === lastArgs[2]\n  );\n  get value(): number[] {\n    if (this.state.isDragging) {\n      return this.mouseMoveState.values;\n    }\n    return this.memoizedValue(this.props.value, this.min, this.max);\n  }\n  get min(): number {\n    return this.props.min as number;\n  }\n  get max(): number {\n    return this.props.max as number;\n  }\n  get step(): number {\n    return this.props.step as number;\n  }\n  get activeIdx(): number {\n    if (this.state.isDragging) {\n      return this.mouseMoveState.activeIdx;\n    }\n    return this.state.activeIdx;\n  }\n  get activeTooltipIdx(): number {\n    const { state } = this;\n    if (this.props.hideTooltip) return -1;\n    else if (state.hoverIdx !== -1) return state.hoverIdx;\n    else if (state.disableFocusTooltip && !state.isDragging) {\n      return -1;\n    }\n    return this.activeIdx;\n  }\n  get tooltipValues(): number[] {\n    const { value } = this;\n    if (this.props.alwaysShowTooltip) {\n      return value;\n    }\n    const activeIdx = this.activeTooltipIdx;\n    if (activeIdx === -1) return [];\n    return [value[activeIdx]];\n  }\n  get minDist(): number {\n    if (!this.props.disableCross || !this.props.minDist) {\n      return 0;\n    }\n    return this.props.minDist;\n  }\n  get rootClassName(): string {\n    return clsx(\n      'Eminus',\n      this.props.disabled && 'Eminus--disabled',\n      this.props.vertical && 'Eminus--vertical',\n      this.props.className\n    );\n  }\n  render() {\n    const { props, state, value, min, max, step, tooltipValues } = this;\n    const range: Range = [\n      value.length <= 1 ? 0 : Math.min(...value),\n      Math.max(...value),\n    ];\n    return (\n      <div\n        onTouchStart={this.onRootMouseDown}\n        onMouseDown={this.onRootMouseDown}\n        ref={this.rootRef}\n        style={props.style}\n        className={this.rootClassName}\n      >\n        <Track\n          vertical={props.vertical}\n          min={min}\n          max={max}\n          hideTrack={props.hideTrack}\n          range={range}\n        />\n        {!isEmpty(props.marks) && (\n          <Marks\n            vertical={props.vertical}\n            labelFormatter={props.markLabelFormatter}\n            onMouseDown={this.onMarkMouseDown}\n            range={range}\n            min={min}\n            max={max}\n            marks={props.marks}\n          />\n        )}\n        {tooltipValues.map((value, idx) => (\n          <Tooltip\n            key={idx}\n            value={value}\n            tooltipFormatter={props.tooltipFormatter}\n            vertical={props.vertical}\n            tooltipRenderer={props.tooltipRenderer}\n            min={min}\n            max={max}\n          />\n        ))}\n        <Controls\n          min={min}\n          max={max}\n          vertical={props.vertical}\n          disabled={props.disabled}\n          step={step}\n          onPointerDown={this.onControlPointerDown}\n          onMouseEnter={this.onControlMouseEnter}\n          onMouseLeave={this.onControlMouseLeave}\n          onFocus={this.onControlFocus}\n          onBlur={this.onControlBlur}\n          isDragging={state.isDragging}\n          activeIdx={this.activeIdx}\n          ariaLabel={props.ariaLabel}\n          ariaLabelledBy={props.ariaLabelledBy}\n          ariaDescribedBy={props.ariaDescribedBy}\n          ariaValueTextFormatter={props.ariaValueTextFormatter}\n          values={value}\n        />\n      </div>\n    );\n  }\n}\nexport default Eminus;\n","export function sortArray(array: number[]): number[] {\n  if (array.length <= 1) return array;\n  else if (array.length === 2) {\n    return array[0] > array[1] ? [array[1], array[0]] : array;\n  }\n  return array.slice().sort((a, b) => a - b);\n}\n","type Acc = {\n  nearest: number;\n  nearestIdx: number;\n};\nexport const findNearestNumberIdx = (\n  array: number[],\n  value: number\n): number => {\n  const { nearestIdx: nearest } = array.reduce(\n    (acc, n, idx) => {\n      const { nearest, nearestIdx } = acc;\n      const dist = Math.abs(value - n);\n      const newAcc: Acc = { nearestIdx: idx, nearest: dist };\n      if (dist > nearest) {\n        return acc;\n      } else if (dist < nearest) {\n        return newAcc;\n      } else {\n        const isIdxMoreSuitableThanCurrent =\n          (value > n && idx > nearestIdx) || (value < n && idx < nearestIdx);\n        if (isIdxMoreSuitableThanCurrent) return newAcc;\n        else return acc;\n      }\n    },\n    { nearestIdx: -1, nearest: Infinity } as Acc\n  );\n  return nearest;\n};\n","import React, { Component } from 'react';\nimport { OnChangeFn } from '../../typings/event-fns';\nimport { UncontrolledRootProps } from '../../typings/root-props';\nimport Eminus from './';\n\ntype Props = UncontrolledRootProps;\ntype State = {\n  value: number[];\n};\nclass EminusUncontrolled extends Component<Props, State> {\n  static defaultProps: Omit<Props, 'defaultValue'> = {\n    min: 0,\n    max: 100,\n    step: 1,\n    disableCross: false,\n    marks: [],\n    ariaLabel: [],\n    ariaLabelledBy: [],\n    ariaDescribedBy: [],\n  };\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      value: props.defaultValue,\n    };\n  }\n  onChange: OnChangeFn = value => {\n    this.setState({ value });\n    if (this.props.onChange) {\n      this.props.onChange(value);\n    }\n  };\n  render() {\n    const { defaultValue: _d, ...props } = this.props;\n    return (\n      <Eminus value={this.state.value} onChange={this.onChange} {...props} />\n    );\n  }\n}\nexport default EminusUncontrolled;\n","import { configure } from '@storybook/react';\n    /* // preview entry\nimport '/home/runner/work/eminus/eminus/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js';\n// preview entry\nimport '/home/runner/work/eminus/eminus/node_modules/@storybook/core-client/dist/esm/globals/globals.js'; */\n\n    import { addDecorator, addParameters, addLoader, addArgTypesEnhancer, addArgsEnhancer } from '@storybook/client-api';\n    import { logger } from '@storybook/client-logger';\n    import * as config_0 from '/@fs//home/runner/work/eminus/eminus/.storybook/preview.js'\nimport * as config_1 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js'\nimport * as config_2 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js'\nimport * as config_3 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js'\nimport * as config_4 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js'\nimport * as config_5 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js'\nimport * as config_6 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js'\nimport * as config_7 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js'\nimport * as config_8 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js'\nimport * as config_9 from '/@fs//home/runner/work/eminus/eminus/node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js'\n    import * as story_0 from '/@fs//home/runner/work/eminus/eminus/src/stories/Aria.stories.tsx'\nimport * as story_1 from '/@fs//home/runner/work/eminus/eminus/src/stories/ControlledAndUncontrolled.stories.mdx'\nimport * as story_2 from '/@fs//home/runner/work/eminus/eminus/src/stories/Eminus.stories.tsx'\nimport * as story_3 from '/@fs//home/runner/work/eminus/eminus/src/stories/Styling.stories.mdx'\nimport * as story_4 from '/@fs//home/runner/work/eminus/eminus/src/stories/Tooltips.stories.mdx'\n      \n    const configs = [config_0,config_1,config_2,config_3,config_4,config_5,config_6,config_7,config_8,config_9]\n    configs.forEach(config => {\n      Object.keys(config).forEach((key) => {\n        const value = config[key];\n        switch (key) {\n          case 'args':\n          case 'argTypes': {\n            return logger.warn('Invalid args/argTypes in config, ignoring.', JSON.stringify(value));\n          }\n          case 'decorators': {\n            return value.forEach((decorator) => addDecorator(decorator, false));\n          }\n          case 'loaders': {\n            return value.forEach((loader) => addLoader(loader, false));\n          }\n          case 'parameters': {\n            return addParameters({ ...value }, false);\n          }\n          case 'argTypesEnhancers': {\n            return value.forEach((enhancer) => addArgTypesEnhancer(enhancer));\n          }\n          case 'argsEnhancers': {\n            return value.forEach((enhancer) => addArgsEnhancer(enhancer))\n          }\n          case 'globals':\n          case 'globalTypes': {\n            const v = {};\n            v[key] = value;\n            return addParameters(v, false);\n          }\n          default: {\n            // eslint-disable-next-line prefer-template\n            return console.log(key + ' was not supported :( !');\n          }\n        }\n      });\n    })\n    \n    /* TODO: not quite sure what to do with this, to fix HMR\n    if (import.meta.hot) {\n        import.meta.hot.accept();    \n    }\n    */\n    \n    configure(() => [story_0,story_1,story_2,story_3,story_4].filter(el => el.default), { hot: import.meta.hot }, false); // not sure if the import.meta.hot thing is correct"],"names":["relList","document","createElement","supports","link","querySelectorAll","MutationObserver","mutations","mutation","type","node","addedNodes","tagName","rel","observe","childList","subtree","ep","fetchOpts","script","integrity","referrerpolicy","referrerPolicy","crossorigin","credentials","getFetchOpts","href","p","layout","options","storySort","order","extractPointerCoords","e","x","touches","clientX","y","clientY","isInRange","value","start","end","Math","min","max","mapNumberToPercent","a","b","c","d","mapNumber","clamp","isNil","React","PureComponent","constructor","preventDefault","stopPropagation","props","onMouseDown","this","labelFormatter","mark","label","vertical","render","sharedStyle","className","clsx","isActive","onTouchStart","style","Marks","marks","map","idx","Mark","range","key","defaultProps","Component","hideTrack","progressStyle","length","onBlur","onFocus","onMouseEnter","onPointerDown","ariaValueText","disabled","ariaLabel","ariaLabelledBy","ariaDescribedBy","onMouseLeave","pointerEvents","isDragging","cursor","role","tabIndex","Controls","values","n","Control","ariaValueTextFormatter","activeIdx","step","Tooltip","content","tooltipFormatter","tooltipRenderer","isArraysEq","arr1","arr2","len1","len2","some","v","disableFocusTooltip","isFocused","hoverIdx","createRef","point","extractValueFromClickPoint","handleMouseDown","state","setState","newValue","moveControl","mouseMoveState","onComplete","removeEventListener","onMouseMove","onMouseUp","body","classList","remove","addEventListener","onKeyDown","currentValue","memoize","sortArray","array","slice","sort","oldArgs","lastArgs","nearest","nearestIdx","reduce","acc","dist","abs","newAcc","nearest2","Infinity","findNearestNumberIdx","add","$focusControl","componentWillUnmount","$findControlByIdx","rootRef","current","querySelector","$el","focus","global2","rootRect","getBoundingClientRect","size","top","bottom","left","right","round","generateNewValueAndCommit","generateNewValue","commitNewValue","oldValue","memoizedValue","onChange","nextValue","minDist","disableCross","dir","isDeadLock","idxToSwitch","deadLockSwitchIdx","genDeadLockMeta","bound","potentialBound","isCurrentAtMin","isCurrentAtMax","switchCandidates","idx2","filter","isEmpty","hideTooltip","alwaysShowTooltip","activeTooltipIdx","tooltipValues","onRootMouseDown","ref","rootClassName","Track","markLabelFormatter","onMarkMouseDown","value2","onControlPointerDown","onControlMouseEnter","onControlMouseLeave","onControlFocus","onControlBlur","Eminus","defaultValue","_a","_d","__spreadValues","EminusUncontrolled","config_0","config_1","config_2","config_3","config_4","config_5","config_6","config_7","config_8","config_9","forEach","keys","config","logger","warn","JSON","stringify","decorator","addDecorator","loader","addLoader","addParameters","enhancer","addArgTypesEnhancer","addArgsEnhancer","console","log","configure","story_0","story_1","story_2","story_3","story_4","el","default","hot"],"mappings":"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"}